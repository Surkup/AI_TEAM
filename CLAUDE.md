# AI_TEAM Project Rules

## 0. Meta-–ø—Ä–∏–Ω—Ü–∏–ø: –ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω—ã (Ready-Made Solutions First)

**–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û**: –ü–µ—Ä–µ–¥ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –õ–Æ–ë–û–ì–û –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–∫–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏—Ä–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –≥–æ—Ç–æ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**:
1. ‚úÖ –§–æ—Ä–º—É–ª–∏—Ä—É–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É/—Ä–µ—à–µ–Ω–∏—é
2. ‚úÖ –ò—â–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã (IETF RFC, ISO, CNCF, W3C, IEEE, OASIS)
3. ‚úÖ –ò—â–µ–º –≥–æ—Ç–æ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (RabbitMQ, Redis, PostgreSQL, gRPC, Kafka, etc.)
4. ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º: –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ª–∏ ‚â•80% —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π?
5. ‚úÖ –ï—Å–ª–∏ –î–ê ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
6. ‚úÖ –ï—Å–ª–∏ –ù–ï–¢ ‚Üí –æ–±–æ—Å–Ω–æ–≤—ã–≤–∞–µ–º custom —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ "–≥–æ—Ç–æ–≤–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è"**:
- ‚úÖ –ï—Å—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (RFC/—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è/—Å—Ç–∞–Ω–¥–∞—Ä—Ç)
- ‚úÖ –ï—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–¥ –ò–õ–ò —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
- ‚úÖ –ï—Å—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Python/Go (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production >3 –ª–µ—Ç (–ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–ø–∞–Ω–∏–π)
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ (commits –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3-6 –º–µ—Å—è—Ü–µ–≤)

**–ó–ê–ü–†–ï–©–ï–ù–û**:
- ‚ùå –ü–∏—Å–∞—Ç—å "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–π X" ‚Äî –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ X
- ‚ùå –ü–∏—Å–∞—Ç—å "—Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ö–æ–∂–∏–π –Ω–∞ Y" ‚Äî –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ Y
- ‚ùå –ì–æ–≤–æ—Ä–∏—Ç—å "–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç" –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ "–ø–æ—á—Ç–∏ –ø–æ–¥—Ö–æ–¥–∏—Ç"**:
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–¥ –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ (95% —Å–ª—É—á–∞–µ–≤)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ + —Ç–æ–Ω–∫–∞—è –æ–±—ë—Ä—Ç–∫–∞ (4% —Å–ª—É—á–∞–µ–≤)
- ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω—É–ª—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–π gap (1% —Å–ª—É—á–∞–µ–≤)

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**:

–ó–∞–¥–∞—á–∞: –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª MindBus –¥–ª—è AI_TEAM

‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –ø–æ–¥—Ö–æ–¥**:
1. –ü—Ä–∏–¥—É–º–∞–ª–∏ "IPv4-inspired binary protocol"
2. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ 20-byte header
3. –ù–∞–ø–∏—Å–∞–ª–∏ –ø–∞—Ä—Å–µ—Ä Protobuf
‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: 7-10 –Ω–µ–¥–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–´–ô –ø–æ–¥—Ö–æ–¥**:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ: AMQP, MQTT, gRPC, NATS
2. –í—ã–±—Ä–∞–ª–∏ AMQP (RabbitMQ) ‚Äî –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 95% —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
3. –î–æ–±–∞–≤–∏–ª–∏ CloudEvents –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: 1-2 –Ω–µ–¥–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, industry-proven —Ä–µ—à–µ–Ω–∏–µ

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –î–û–õ–ñ–ù–û –±—ã—Ç—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ**:
- –í `docs/concepts/COMPONENT_NAME_decision.md` ‚Äî –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- –í `docs/SSOT/COMPONENT_SPEC.md` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–¢–†–ò–ì–ì–ï–†–´ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç—Ç–æ–≥–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞**:

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –∑–∞–¥–∞—á—É —Ç–∏–ø–∞:
- "–†–∞–∑—Ä–∞–±–æ—Ç–∞–π –ø—Ä–æ—Ç–æ–∫–æ–ª..."
- "–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö..."
- "–°–æ–∑–¥–∞–π —Å–∏—Å—Ç–µ–º—É –¥–ª—è..."
- "–ü—Ä–∏–¥—É–º–∞–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É..."

‚Üí –°–¢–û–ü! –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –°–ø—Ä–æ—Å–∏—Ç—å: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –ª–∏ —Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è?"
2. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å: "–î–∞–≤–∞–π —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–π–¥—ë–º, —á—Ç–æ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –º–∏—Ä–µ"
3. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π (–º–∏–Ω–∏–º—É–º 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
4. –¢–û–õ–¨–ö–û –ü–û–°–õ–ï –≠–¢–û–ì–û –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å custom —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É (–µ—Å–ª–∏ –≥–æ—Ç–æ–≤—ã–µ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç)

See: README.md section "üèõÔ∏è –û–ø–æ—Ä–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã"
See: PROJECT_OVERVIEW.md section "–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –ø–æ–∏—Å–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π"

---

## 1. SSOT - NEVER modify without specification first

**CRITICAL**: Specification-Driven Development is mandatory

- `docs/SSOT/` contains canonical data schemas - **NEVER modify without team approval**
- **NEVER write code before SSOT specification is created and approved**
- **ALWAYS validate code against SSOT schemas before implementation**
- **ALWAYS ask before creating or modifying any file in `docs/SSOT/`**

**SSOT vs Config** - NEVER mix:
- **SSOT** defines "system language" (data structures, message formats, schemas)
- **Config** defines "runtime environment" (timeouts, ports, limits, credentials)
- Example: Field name `trace_id` ‚Üí SSOT. Timeout value `30s` ‚Üí Config.

See: README.md section "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º (Specification-Driven Development)"

---

## 2. Security - NEVER commit credentials

**NEVER commit**:
- `.env` files - contain API keys and secrets
- `config/*.json` - may contain sensitive data
- Any files with API keys, tokens, passwords
- Files matching patterns: `*.key`, `*.pem`, `credentials.*`, `secrets.*`

**ALWAYS**:
- Check `git status` before commits
- Ask before committing config files
- Use environment variables for secrets

---

## 3. Configuration - NEVER hardcode parameters

**CRITICAL RULE**: Zero Hardcoding principle

**NEVER hardcode in code**:
- Timeouts, retries, limits
- API keys, URLs, ports, hostnames
- Agent names, component IDs
- File paths, directory paths
- Threshold values
- Any "magic numbers" or constants

**MUST be in config files**:
- All system parameters
- Component settings
- Resource limits
- Connection addresses

See: README.md section "‚öôÔ∏è –ù—É–ª–µ–≤–æ–π —Ö–∞—Ä–¥–∫–æ–¥ (Zero Hardcoding)"

---

## 4. Git workflow

**Main branch**: `main`

**Commit messages**:
- ALWAYS write in Russian
- ALWAYS include: what was done and why
- Format: `<action>: <description>`
- ALWAYS add `Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>` for AI-generated code

**NEVER**:
- Force push to `main` branch
- Commit without descriptive message
- Skip pre-commit hooks

**Git safety**:
- ALWAYS run `git status` before commits
- ALWAYS review `git diff` before committing
- Ask before any destructive git operations

See: docs/IMPLEMENTATION_ROADMAP.md for development stages

---

## 5. Before deleting or major changes - ALWAYS ask

**ALWAYS ask before**:
- Deleting any file
- Modifying files in `docs/SSOT/` directory
- Modifying `README.md`, `QUESTIONS.md`, `CLAUDE.md`
- Modifying `docs/project/IMPLEMENTATION_ROADMAP.md`
- Modifying `docs/SSOT/mindbus_protocol_v1.md`
- Any structural changes to the project

**IMPORTANT**: SSOT changes require team discussion and approval

---

## 6. Project structure

**Critical directories**:
- `docs/SSOT/` - Canonical data schemas (**DO NOT TOUCH without approval**)
- `docs/` - All project documentation
- `config/` - Configuration files (check before commit)

**Key files**:
- `README.md` - Project concept and principles
- `QUESTIONS.md` - Open questions catalog
- `CLAUDE.md` - This file (project rules)
- `docs/SSOT/mindbus_protocol_v1.md` - MindBus Protocol v1.0 (Final)
- `docs/project/IMPLEMENTATION_ROADMAP.md` - Development plan (current)
- `docs/archive_reorganization_2025-12-15/PRELIMINARY_PLAN.md` - Initial planning (archived)

---

## 7. Development workflow - MUST follow

**MANDATORY order**:
1. ‚úÖ Create SSOT specification (in `docs/SSOT/`)
2. ‚úÖ Document in project docs
3. ‚úÖ Get team approval
4. ‚úÖ **ONLY THEN** write code

**NEVER**:
- Code with "temporary" structures ("will fix later")
- Invent data formats on-the-fly
- Use different structures in different components for same entity
- Change data structures without updating SSOT first

See: README.md sections:
- "üéØ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Single Source of Truth - SSOT)"
- "üìã –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º (Specification-Driven Development)"

---

## 8. Code quality

**ALWAYS**:
- Follow SSOT schemas strictly
- Validate all inputs and outputs
- Include error handling
- Write clear, self-documenting code
- Add comments only where logic is non-obvious

**NEVER**:
- Skip validation against SSOT
- Assume data structure without checking SSOT
- Write code before specification exists

**Handling invalid data** (CRITICAL for distributed system):
- **IF** message violates SSOT schema ‚Üí **REJECT immediately**
- **NEVER** try to "fix" or "guess" invalid data
- **ALWAYS** log validation error with details
- **MUST** send ERROR message back to sender (if applicable)
- Component should fail fast, not silently ignore errors

---

## 9. Documentation

**ALWAYS keep updated**:
- SSOT specs when data structures change
- README.md when principles change
- QUESTIONS.md when new questions arise
- Implementation docs when architecture changes

**Documentation is NOT optional** - it must be updated **before or with** code changes

---

## 10. When in doubt

**If unsure about**:
- Data structure ‚Üí Check `docs/SSOT/` first, ask if not found
- Project rules ‚Üí Check this file and README.md
- Development plan ‚Üí Check `docs/project/IMPLEMENTATION_ROADMAP.md`
- Open questions ‚Üí Check `QUESTIONS.md`

**ALWAYS ask before**:
- Making structural changes
- Modifying SSOT files
- Deleting anything
- Committing config files

---

**Last updated**: 2025-12-15
**Version**: 1.1 (–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–∞-–ø—Ä–∏–Ω—Ü–∏–ø "–ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω—ã")
