# ORCHESTRATOR Specification v2.0 DRAFT

**–°—Ç–∞—Ç—É—Å**: **–ß–ï–†–ù–û–í–ò–ö** –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏
**–í–µ—Ä—Å–∏—è**: 2.0-draft
**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: 2025-12-19
**–û—Å–Ω–æ–≤–∞**: ORCHESTRATOR_SPEC_v1.0 + –≤—Å–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ + –Ω–æ–≤–æ–µ –≤–∏–¥–µ–Ω–∏–µ

---

## –í–ê–ñ–ù–û: –≠—Ç–æ —Ä–∞–±–æ—á–∏–π –¥–æ–∫—É–º–µ–Ω—Ç

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:
- ‚úÖ –¢–µ–∫—É—â—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é ORCHESTRATOR_SPEC_v1.0
- ‚úÖ –ß–µ—Ä–Ω–æ–≤–∏–∫–∏: Cognitive Stack, Brain Dynamics, Concept v0.2, Process Card Interpreter
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ QUESTIONS.md (—Ä–∞–∑–¥–µ–ª 1: Orchestrator)
- ‚úÖ **–ù–û–í–û–ï**: –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ **–ù–û–í–û–ï**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å Process Cards

**–¶–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ–µ –¢–ó –Ω–∞ "—É–º–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞", –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–µ—Ç —Å–µ—Ä–¥—Ü–µ–º —Å–∏—Å—Ç–µ–º—ã AI_TEAM.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

**–ß–∞—Å—Ç—å I: –û—Å–Ω–æ–≤—ã**
1. [–§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –≤–∏–¥–µ–Ω–∏–µ](#1-—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è-–∏-–≤–∏–¥–µ–Ω–∏–µ)
2. [–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç v1.0](#2-–∫–ª—é—á–µ–≤—ã–µ-–æ—Ç–ª–∏—á–∏—è-–æ—Ç-v10)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: MVP-—è–¥—Ä–æ –∏ –ø–ª–∞–≥–∏–Ω—ã](#3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-mvp-—è–¥—Ä–æ-–∏-–ø–ª–∞–≥–∏–Ω—ã) ‚Üê **–ù–û–í–û–ï v2.0**
   - 3.5. [–¢–∞–π–º–∞—É—Ç—ã –∏ Quorum](#35-—Ç–∞–π–º–∞—É—Ç—ã-–∏-quorum-–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ-–ø—Ä–∞–≤–∏–ª–∞) ‚Üê **–ù–û–í–û–ï v2.0**
   - 3.6. [–ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞](#36-–∑–∞—â–∏—Ç–∞-–æ—Ç-—Ñ–ª—É–¥–∞-anti-flood) ‚Üê **–ù–û–í–û–ï v2.0**
   - 3.7. [–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤](#37-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤-conflict-resolution) ‚Üê **–ù–û–í–û–ï v2.0**
4. [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Process Cards](#4-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ-—Å–æ–∑–¥–∞–Ω–∏–µ-process-cards)
   - 4.5. [Sandboxing –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#45-sandboxing-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö-–∫–∞—Ä—Ç–æ—á–µ–∫) ‚Üê **–ù–û–í–û–ï v2.0**

**–ß–∞—Å—Ç—å II: MVP-—è–¥—Ä–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏)**
5. [State Contract (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)](#5-state-contract-—Ö—Ä–∞–Ω–µ–Ω–∏–µ-–∏-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ) ‚Üê **–ù–û–í–û–ï v2.0**
6. [–ò–µ—Ä–∞—Ä—Ö–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)](#6-–∏–µ—Ä–∞—Ä—Ö–∏—è-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤-–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)
7. [–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Å—Ç–µ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#6-–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π-—Å—Ç–µ–∫-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
8. [–†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á](#7-—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è-–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è-–∑–∞–¥–∞—á)
9. [Quality Loop (–ø–µ—Ç–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)](#8-quality-loop-–ø–µ—Ç–ª—è-–∫–∞—á–µ—Å—Ç–≤–∞)
10. [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Process Cards](#9-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä-process-cards)
11. [9 —ç—Ç–∞–ø–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è](#10-9-—ç—Ç–∞–ø–æ–≤-–æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è-–ø—Ä–æ–µ–∫—Ç–∞)
12. [–ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã](#11-–∑–∞—â–∏—Ç–Ω—ã–µ-–º–µ—Ö–∞–Ω–∏–∑–º—ã)

**–ß–∞—Å—Ç—å III: –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
12. [Backwards Compatibility —Å v1.0](#12-backwards-compatibility-—Å-v10) ‚Üê **–ù–û–í–û–ï v2.0**
13. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MindBus –∏ Storage](#13-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-mindbus-–∏-storage)

**–ß–∞—Å—Ç—å IV: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
14. [–û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#14-–æ—Ç–∫—Ä—ã—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã-–¥–ª—è-–æ–±—Å—É–∂–¥–µ–Ω–∏—è)
15. [–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#15-–ø–ª–∞–Ω-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## 1. –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –≤–∏–¥–µ–Ω–∏–µ

### 1.1. –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

> **Orchestrator = —É–º–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –° –∫–æ–º–∞–Ω–¥–æ–π, –∞ –Ω–µ –ù–ê–î –∫–æ–º–∞–Ω–¥–æ–π**

Orchestrator –Ω–µ –¥–∏–∫—Ç—É–µ—Ç ‚Äî –æ–Ω **–º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏–µ**, **—Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è**, **—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Å–µ–Ω—Å—É—Å** –∏ **—Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π** –≤–º–µ—Å—Ç–µ —Å –∞–≥–µ–Ω—Ç–∞–º–∏.

### 1.2. –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞ (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–æ–ª—å | –ú–µ—Ç–∞—Ñ–æ—Ä–∞ |
|-----------|------|----------|
| **MindBus** | –ü–µ—Ä–µ–¥–∞—á–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ | –ù–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ |
| **Orchestrator** | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | **–°–æ–≤–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤** (CEO + —Å–æ–≤–µ—Ç–Ω–∏–∫–∏) |
| **Agents** | –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –æ—Ç–¥–µ–ª–æ–≤ |
| **Process Cards** | –ü–ª–∞–Ω—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ | –ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–æ–≤–µ—â–∞–Ω–∏–π, –ø—Ä–∏–∫–∞–∑—ã |
| **Storage** | –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å | –ê—Ä—Ö–∏–≤, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |

### 1.3. –ü—Ä–∏–Ω—Ü–∏–ø "–ö–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑—É–º–∞"

```
–ß–µ–ª–æ–≤–µ–∫ (CEO): "–ù–∞–ø–∏—à–∏ –∫–Ω–∏–≥—É –ø—Ä–æ AI"
                   ‚îÇ
                   ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ORCHESTRATOR                 ‚îÇ
    ‚îÇ  "–†–µ–±—è—Ç–∞, –ø–æ—Å—Ç—É–ø–∏–ª–∞ –∑–∞–¥–∞—á–∞.          ‚îÇ
    ‚îÇ   –î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –ø–ª–∞–Ω!"             ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº                ‚ñº                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇResearcher‚îÇ    ‚îÇ Writer  ‚îÇ    ‚îÇ Editor  ‚îÇ
‚îÇ"–ò–∑—É—á–∏—Ç—å ‚îÇ    ‚îÇ"–°–æ–∑–¥–∞—Ç—å ‚îÇ    ‚îÇ"–°–¥–µ–ª–∞—Ç—å ‚îÇ
‚îÇ —Ç—Ä–µ–Ω–¥—ã" ‚îÇ    ‚îÇ –ø–ª–∞–Ω"   ‚îÇ    ‚îÇ —Ä–µ–≤—å—é"  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  ORCHESTRATOR —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –ø–ª–∞–Ω:      ‚îÇ
    ‚îÇ  1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ ‚Üí 2. –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ ‚Üí   ‚îÇ
    ‚îÇ  3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –≥–ª–∞–≤ ‚Üí 4. –†–µ–¥–∞–∫—Ç—É—Ä–∞    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.4. –ß—Ç–æ —É–º–µ–µ—Ç "—É–º–Ω—ã–π Orchestrator" (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–¥–µ–∏ |
|-------------|----------|---------------|
| **–ó–Ω–∞–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ** | –í–∏–¥–∏—Ç Node Registry, –ø–æ–Ω–∏–º–∞–µ—Ç capabilities | v1.0 |
| **–ó–Ω–∞–µ—Ç –∫–æ–º—É –ø–æ—Ä—É—á–∏—Ç—å** | Capability matching, –≤—ã–±–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è | v1.0 |
| **–ü–æ–Ω–∏–º–∞–µ—Ç —è–∑—ã–∫ –∫–∞—Ä—Ç–æ—á–µ–∫** | YAML/JSON –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Process Cards | Process Card Interpreter |
| **–ù–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö** | –í–∞–ª–∏–¥–∞—Ü–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | Process Card Interpreter |
| **–ü–æ–Ω–∏–º–∞–µ—Ç –Ω–µ–≤—ã–ø–æ–ª–Ω–∏–º–æ—Å—Ç—å** | –ù–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π ‚Üí escalation | v1.0, QUESTIONS.md 1.7 |
| **–°–æ–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏** | LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–ª–∞–Ω –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ | **–ù–û–í–û–ï**, Brain Dynamics |
| **–°–æ–∑–¥–∞—ë—Ç –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã** | –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –∏–µ—Ä–∞—Ä—Ö–∏—è | **–ù–û–í–û–ï**, QUESTIONS.md 1.7 |
| **–ü—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –≤ –ø–æ–¥—É—Ä–æ–≤–Ω–∏** | –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è | **–ù–û–í–û–ï**, Brain Dynamics |
| **–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏–µ** | –ê–≥–µ–Ω—Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç, Orchestrator —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç | **–ù–û–í–û–ï** |
| **–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ** | Quality Loop, –∫—Ä–∏—Ç–∏–∫–∞, —É–ª—É—á—à–µ–Ω–∏—è | Cognitive Stack |
| **–°–∞–º–æ–∞–Ω–∞–ª–∏–∑** | –ü—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏, post-mortem | Brain Dynamics |

---

## 2. –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç v1.0

### 2.1. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | v1.0 | v2.0 DRAFT |
|--------|------|------------|
| **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | LLM Planner —Ä–µ—à–∞–µ—Ç —Å–∞–º | **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ** ‚Äî –∫–æ–º–∞–Ω–¥–∞ –æ–±—Å—É–∂–¥–∞–µ—Ç |
| **Process Cards** | –°—Ç–∞—Ç–∏—á–Ω—ã–µ (YAML –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è) | **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ** ‚Äî —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ |
| **–ò–µ—Ä–∞—Ä—Ö–∏—è** | –ü–ª–æ—Å–∫–∞—è (–æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å) | **–í–ª–æ–∂–µ–Ω–Ω–∞—è** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ |
| **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è** | –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è | **–†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è** ‚Äî –ø–æ–∫–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å–∫–∞–∂–µ—Ç "—Ö–≤–∞—Ç–∏—Ç" |
| **–ö—Ç–æ —Ä–µ—à–∞–µ—Ç –≥–ª—É–±–∏–Ω—É?** | Policy (max_steps) | **–ö–æ–º–∞–Ω–¥–∞ + Policy** |
| **Quality Loop** | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è | **–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–∏—Å–∞–Ω** |
| **Self-reflection** | –ù–µ—Ç | **–ï—Å—Ç—å** ‚Äî –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω, post-mortem |

### 2.2. –≠–≤–æ–ª—é—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
v1.0: Policy-Governed Hybrid (LLM + Policy Layer)
           ‚îÇ
           ‚ñº
v2.0: Collaborative Policy-Governed Hybrid
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ               ORCHESTRATOR                  ‚îÇ
      ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
      ‚îÇ  ‚îÇ Meeting  ‚îÇ  ‚îÇ   LLM    ‚îÇ  ‚îÇ  Policy  ‚îÇ ‚îÇ
      ‚îÇ  ‚îÇModerator ‚îÇ‚óÑ‚îÄ‚îÇ Planner  ‚îÇ‚îÄ‚ñ∫‚îÇ  Layer   ‚îÇ ‚îÇ
      ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
      ‚îÇ       ‚îÇ              ‚îÇ             ‚îÇ       ‚îÇ
      ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
      ‚îÇ                      ‚ñº                     ‚îÇ
      ‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
      ‚îÇ            ‚îÇ Execution Engine ‚îÇ           ‚îÇ
      ‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: MVP-—è–¥—Ä–æ –∏ –ø–ª–∞–≥–∏–Ω—ã

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤**: "–†–∏—Å–∫ –º–æ–Ω–æ–ª–∏—Ç–∞-—á—ë—Ä–Ω–æ–≥–æ —è—â–∏–∫–∞. –ù—É–∂–Ω–æ —è–≤–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —è–¥—Ä–æ vs –ø–ª–∞–≥–∏–Ω—ã."

### 3.1. –ü—Ä–∏–Ω—Ü–∏–ø –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

Orchestrator —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **–∂—ë—Å—Ç–∫–æ–≥–æ —è–¥—Ä–∞** (MVP-–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –∏ **–ø–ª–∞–≥–∏–Ω–æ–≤** (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ORCHESTRATOR v2.0                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë                   MVP-–Ø–î–†–û (Core)                      ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ Execution Engine ‚îÇ  ‚îÇ State Manager              ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ (State Machine)  ‚îÇ  ‚îÇ (Persistence + Recovery)   ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ Process Card    ‚îÇ  ‚îÇ Protection Layer           ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ Interpreter     ‚îÇ  ‚îÇ (Limits, CB, Kill Switch)  ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ Subprocess      ‚îÇ  ‚îÇ Basic Quality Loop         ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îÇ Manager         ‚îÇ  ‚îÇ (PASS/FAIL + retry)        ‚îÇ ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                              ‚îÇ                               ‚îÇ
‚îÇ                              ‚îÇ Plugin Interface              ‚îÇ
‚îÇ                              ‚ñº                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                      –ü–õ–ê–ì–ò–ù–´                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Meeting    ‚îÇ ‚îÇ  Dynamic    ‚îÇ ‚îÇ  Cognitive      ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Moderator  ‚îÇ ‚îÇ  Card Gen   ‚îÇ ‚îÇ  Stack          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (Phase 3)  ‚îÇ ‚îÇ  (Phase 4)  ‚îÇ ‚îÇ  (Phase 5)      ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Advanced   ‚îÇ ‚îÇ  Self-      ‚îÇ ‚îÇ  Future         ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Quality    ‚îÇ ‚îÇ  Reflection ‚îÇ ‚îÇ  Plugins...     ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2. –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ MVP-—è–¥—Ä–æ (MUST HAVE)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ—á–µ–º—É –∫—Ä–∏—Ç–∏—á–Ω–æ |
|-----------|----------|-----------------|
| **Execution Engine** | State Machine –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ | –ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **State Manager** | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è | –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–∂–∏–≤–∞—Ç—å —Ä–µ—Å—Ç–∞—Ä—Ç—ã |
| **Process Card Interpreter** | Parse ‚Üí Validate ‚Üí Execute | –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è Orchestrator |
| **Subprocess Manager** | –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã | –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ v2.0 |
| **Basic Quality Loop** | PASS/FAIL + retry | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ |
| **Protection Layer** | –õ–∏–º–∏—Ç—ã, Circuit Breaker, Kill Switch | –ó–∞—â–∏—Ç–∞ –æ—Ç —Ö–∞–æ—Å–∞ |

### 3.3. –ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø–ª–∞–≥–∏–Ω–∞–º–∏ (SHOULD/NICE TO HAVE)

| –ü–ª–∞–≥–∏–Ω | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å |
|--------|----------|-----------------|
| **Meeting Moderator** | –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | Phase 3 (–ø–æ—Å–ª–µ MVP) |
| **Dynamic Card Generator** | LLM —Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ | Phase 4 |
| **Cognitive Stack** | 9 —ç—Ç–∞–ø–æ–≤, —Ä–µ–∂–∏–º—ã A/B/C | Phase 5 |
| **Advanced Quality** | Triangle of Quality, Arbitrator | Phase 5 |
| **Self-Reflection** | Post-mortem, –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ | Phase 5 |

### 3.4. Plugin Interface (–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤)

```python
from abc import ABC, abstractmethod
from typing import Dict, Any, Optional

class OrchestratorPlugin(ABC):
    """–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤ Orchestrator"""

    @property
    @abstractmethod
    def plugin_id(self) -> str:
        """–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–ª–∞–≥–∏–Ω–∞"""
        pass

    @property
    @abstractmethod
    def plugin_version(self) -> str:
        """–í–µ—Ä—Å–∏—è –ø–ª–∞–≥–∏–Ω–∞"""
        pass

    @abstractmethod
    async def on_process_start(self, process_state: ProcessState) -> Optional[ProcessState]:
        """–•—É–∫: –ø—Ä–æ—Ü–µ—Å—Å —Å—Ç–∞—Ä—Ç—É–µ—Ç. –ú–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å state."""
        pass

    @abstractmethod
    async def on_step_before(self, step: ProcessStep, context: Dict[str, Any]) -> Optional[ProcessStep]:
        """–•—É–∫: –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —à–∞–≥–∞. –ú–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —à–∞–≥."""
        pass

    @abstractmethod
    async def on_step_after(self, step: ProcessStep, result: StepResult) -> Optional[StepResult]:
        """–•—É–∫: –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–∞. –ú–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç."""
        pass

    @abstractmethod
    async def on_process_complete(self, process_state: ProcessState) -> None:
        """–•—É–∫: –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à—ë–Ω."""
        pass


class MeetingModeratorPlugin(OrchestratorPlugin):
    """–ü—Ä–∏–º–µ—Ä: –ø–ª–∞–≥–∏–Ω –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""

    plugin_id = "meeting_moderator"
    plugin_version = "1.0.0"

    async def on_process_start(self, process_state: ProcessState) -> Optional[ProcessState]:
        # –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Å–ª–æ–∂–Ω–∞—è ‚Äî —Å–æ–∑–≤–∞—Ç—å —Å–æ–≤–µ—â–∞–Ω–∏–µ
        if self.should_convene_meeting(process_state):
            meeting_result = await self.convene_meeting(process_state)
            process_state.plan = meeting_result.synthesized_plan
        return process_state
```

### 3.5. –ì—Ä–∞–Ω–∏—Ü—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

```yaml
boundaries:
  # –Ø–¥—Ä–æ –û–¢–í–ï–ß–ê–ï–¢ –∑–∞:
  core_responsibilities:
    - "–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤ Process Card"
    - "–•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è"
    - "–ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫"
    - "Retry –∏ error handling"
    - "–ó–∞—â–∏—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã"
    - "–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã"

  # –Ø–¥—Ä–æ –ù–ï –û–¢–í–ï–ß–ê–ï–¢ –∑–∞ (–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –ø–ª–∞–≥–∏–Ω–∞–º):
  delegated_to_plugins:
    - "–°–ø–æ—Å–æ–± –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (solo LLM vs meeting)"
    - "–°–ø–æ—Å–æ–± –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ (—à–∞–±–ª–æ–Ω vs LLM)"
    - "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (Triangle)"
    - "Self-reflection –∏ post-mortem"
    - "9 —ç—Ç–∞–ø–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è"
```

---

## 4. –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è "–°–æ–≤–µ—â–∞–Ω–∏—è"

–ö–æ–≥–¥–∞ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞, Orchestrator –Ω–µ —Ä–µ—à–∞–µ—Ç —Å–∞–º ‚Äî –æ–Ω **—Å–æ–∑—ã–≤–∞–µ—Ç —Å–æ–≤–µ—â–∞–Ω–∏–µ** —Å –∞–≥–µ–Ω—Ç–∞–º–∏.

### 3.2. –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–≤–µ—â–∞–Ω–∏—è

```yaml
# –®–∞–≥ 1: Orchestrator –æ–±—ä—è–≤–ª—è–µ—Ç —Ç–µ–º—É
meeting:
  id: "meeting-001"
  topic: "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞: –Ω–∞–ø–∏—Å–∞—Ç—å –∫–Ω–∏–≥—É –ø—Ä–æ AI"
  participants:
    - researcher
    - writer
    - editor
    - critic
  goal: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"
  initiated_at: "2025-12-19T10:00:00Z"

# –®–∞–≥ 2: –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç proposal-–æ–º
proposals:
  - from: researcher
    proposal:
      action: "research_topic"
      description: "–ò–∑—É—á–∏—Ç—å —Ç—Ä–µ–Ω–¥—ã AI 2025, –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤"
      why: "–ß—Ç–æ–±—ã –∫–Ω–∏–≥–∞ –±—ã–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π"
      estimated_effort: "medium"
      dependencies: []

  - from: writer
    proposal:
      action: "create_outline"
      description: "–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–Ω–∏–≥–∏: –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ, –≥–ª–∞–≤—ã, –ø–æ–¥–≥–ª–∞–≤—ã"
      why: "–ë–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∏—Å–∞—Ç—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ"
      estimated_effort: "low"
      dependencies: ["research_topic"]

  - from: editor
    proposal:
      action: "define_style_guide"
      description: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∏–ª—å, tone of voice, —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é"
      why: "–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞"
      estimated_effort: "low"
      dependencies: []

# –®–∞–≥ 3: Orchestrator —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –ø–ª–∞–Ω
synthesis:
  method: "llm_synthesis"  # –∏–ª–∏ "voting" –∏–ª–∏ "orchestrator_decision"
  result:
    steps:
      - id: "step-1"
        action: "research_topic"
        assignee_requirements: ["web_search", "summarization"]

      - id: "step-2"
        action: "define_style_guide"
        assignee_requirements: ["text_analysis"]
        parallel_with: "step-1"  # –ú–æ–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

      - id: "step-3"
        action: "create_outline"
        assignee_requirements: ["text_generation"]
        depends_on: ["step-1", "step-2"]
```

### 3.3. –†–µ–∂–∏–º—ã –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

```yaml
# –í Process Card –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ:
decision_mode:
  type: "orchestrator_synthesis"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é

  # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
  # type: "voting"              # –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
  # type: "consensus"           # –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–∏–µ –≤—Å–µ—Ö
  # type: "human_approval"      # –ß–µ–ª–æ–≤–µ–∫ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–ª–∞–Ω

  # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è synthesis:
  synthesis:
    model: "gpt-4"
    consider_all_proposals: true
    explain_rejections: true
```

### 3.4. –ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–æ —Å–æ–≤–µ—â–∞–Ω–∏–µ

Orchestrator –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–≤–µ—â–∞–Ω–∏–µ –µ—Å–ª–∏:
- –ó–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ç–∞—è (1-2 —à–∞–≥–∞)
- –ï—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω Process Card
- –ß–µ–ª–æ–≤–µ–∫ —è–≤–Ω–æ –∑–∞–ø—Ä–µ—Ç–∏–ª ("–ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π, –Ω–µ –æ–±—Å—É–∂–¥–∞–π")

```yaml
meeting_policy:
  skip_if:
    - task_complexity: "trivial"
    - template_exists: true
    - human_override: "skip_meeting"
```

### 3.5. –¢–∞–π–º–∞—É—Ç—ã –∏ Quorum (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤**: "Meeting Protocol –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç—ã, –∫–≤–æ—Ä—É–º, –∑–∞—â–∏—Ç—É –æ—Ç —Ñ–ª—É–¥–∞"

```yaml
meeting_timeouts:
  # –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è —Ñ–∞–∑ —Å–æ–≤–µ—â–∞–Ω–∏—è
  proposal_collection:
    timeout_seconds: 60           # –ñ–¥—ë–º proposals –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤
    min_wait_seconds: 10          # –ú–∏–Ω–∏–º—É–º –∂–¥–∞—Ç—å (–¥–∞–∂–µ –µ—Å–ª–∏ –≤—Å–µ –æ—Ç–≤–µ—Ç–∏–ª–∏)

  discussion_phase:
    timeout_seconds: 120          # –û–±—Å—É–∂–¥–µ–Ω–∏–µ proposals
    max_rounds: 3                 # –ú–∞–∫—Å–∏–º—É–º —Ä–∞—É–Ω–¥–æ–≤ –æ–±—Å—É–∂–¥–µ–Ω–∏—è

  synthesis_phase:
    timeout_seconds: 30           # LLM —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –ø–ª–∞–Ω

  # –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ timeout
  on_timeout:
    proposal_collection: "proceed_with_received"  # –ò–¥—ë–º –¥–∞–ª—å—à–µ —Å —Ç–µ–º —á—Ç–æ –µ—Å—Ç—å
    discussion_phase: "force_synthesis"           # –ü—Ä–µ—Ä—ã–≤–∞–µ–º, –∏–¥—ë–º –∫ —Å–∏–Ω—Ç–µ–∑—É
    synthesis_phase: "fallback_to_voting"         # LLM –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è ‚Üí –≥–æ–ª–æ—Å—É–µ–º
```

```yaml
quorum_rules:
  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  minimum_participants:
    absolute: 2                   # –ú–∏–Ω–∏–º—É–º 2 –∞–≥–µ–Ω—Ç–∞
    percentage: 0.5               # –ò–õ–ò 50% –æ—Ç –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö
    use: "max"                    # –ë–µ—Ä—ë–º –º–∞–∫—Å–∏–º—É–º –∏–∑ –¥–≤—É—Ö —É—Å–ª–æ–≤–∏–π

  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ proposals
  minimum_proposals:
    absolute: 1                   # –•–æ—Ç—è –±—ã 1 proposal
    percentage: 0.3               # –ò–õ–ò 30% –æ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    use: "max"

  # –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–≤–æ—Ä—É–º –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
  on_quorum_failure:
    retry_count: 2                # –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ 2 —Ä–∞–∑–∞
    retry_delay_seconds: 30
    fallback: "orchestrator_decides"  # Orchestrator —Ä–µ—à–∞–µ—Ç —Å–∞–º

  # –ê–≥–µ–Ω—Ç—ã —Å –ø—Ä–∞–≤–æ–º –≤–µ—Ç–æ
  veto_holders:
    - "human_representative"      # –ß–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
    - "security_agent"            # Security –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞–Ω—ã
```

### 3.6. –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞ (Anti-Flood)

```yaml
anti_flood:
  # –õ–∏–º–∏—Ç—ã –Ω–∞ –∞–≥–µ–Ω—Ç–∞
  per_agent:
    max_proposals_per_meeting: 3          # –ú–∞–∫—Å–∏–º—É–º 3 proposals
    max_comments_per_discussion: 10       # –ú–∞–∫—Å–∏–º—É–º 10 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    max_message_length_chars: 5000        # –ú–∞–∫—Å–∏–º—É–º 5000 —Å–∏–º–≤–æ–ª–æ–≤

  # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã
  global:
    max_total_proposals: 20               # –í—Å–µ–≥–æ proposals –Ω–∞ —Å–æ–≤–µ—â–∞–Ω–∏–∏
    max_total_discussion_messages: 100    # –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏

  # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–ø–∞–º–∞
  spam_detection:
    enabled: true
    duplicate_threshold: 0.9              # Similarity > 90% = –¥—É–±–ª–∏–∫–∞—Ç
    rate_limit_per_second: 2              # –ú–∞–∫—Å–∏–º—É–º 2 —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥—É

  # –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏
  on_violation:
    first_offense: "warn"                 # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    second_offense: "mute_5_min"          # –ó–∞–≥–ª—É—à–∏—Ç—å –Ω–∞ 5 –º–∏–Ω—É—Ç
    third_offense: "exclude_from_meeting" # –ò—Å–∫–ª—é—á–∏—Ç—å —Å —Å–æ–≤–µ—â–∞–Ω–∏—è
```

### 3.7. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (Conflict Resolution)

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ 2**: "–ü—Ä–æ–±–ª–µ–º–∞ '–í–∏–∑–∞–Ω—Ç–∏–π—Å–∫–∏—Ö –ì–µ–Ω–µ—Ä–∞–ª–æ–≤' ‚Äî –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –ø–ª–∞–Ω—ã"

```yaml
conflict_resolution:
  # –≠—Ç–∞–ø 1: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
  detection:
    enabled: true
    methods:
      - "dependency_analysis"      # A –∑–∞–≤–∏—Å–∏—Ç –æ—Ç B, B –∑–∞–≤–∏—Å–∏—Ç –æ—Ç A
      - "resource_conflict"        # –û–±–∞ —Ö–æ—Ç—è—Ç –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å
      - "semantic_similarity"      # LLM –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–µ–Ω–∏–µ
      - "explicit_conflict_flag"   # –ê–≥–µ–Ω—Ç —Å–∞–º –ø–æ–º–µ—Ç–∏–ª conflict_with

  # –≠—Ç–∞–ø 2: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
  resolution_strategies:
    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ –≤–µ—Å—É –∞–≥–µ–Ω—Ç–∞
    priority_based:
      description: "–í—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç —Å –±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º"
      when: "clear_priority_difference"

    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: LLM-–∞—Ä–±–∏—Ç—Ä–∞–∂
    llm_arbitration:
      description: "LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–µ–µ"
      when: "equal_priority"
      model: "gpt-4"
      max_arbitration_time_seconds: 30

    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
    voting:
      description: "–í—Å–µ –∞–≥–µ–Ω—Ç—ã –≥–æ–ª–æ—Å—É—é—Ç –∑–∞ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"
      when: "llm_arbitration_failed"
      voting_method: "ranked_choice"  # –∏–ª–∏ "simple_majority"

    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è 4: –≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ —á–µ–ª–æ–≤–µ–∫—É
    human_escalation:
      description: "–ß–µ–ª–æ–≤–µ–∫ —Ä–µ—à–∞–µ—Ç"
      when: "critical_conflict OR voting_tie"
      timeout_seconds: 300

    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è 5: –ü–æ–ø—ã—Ç–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
    merge_proposals:
      description: "LLM –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ª—É—á—à–∏–µ —á–∞—Å—Ç–∏ –æ–±–æ–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π"
      when: "proposals_complementary"

  # –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
  resolution_order:
    - "merge_proposals"           # –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å
    - "priority_based"            # –ü–æ—Ç–æ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
    - "llm_arbitration"           # –ü–æ—Ç–æ–º LLM
    - "voting"                    # –ü–æ—Ç–æ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
    - "human_escalation"          # –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ ‚Äî —á–µ–ª–æ–≤–µ–∫
```

```python
# –ü—Ä–∏–º–µ—Ä: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
class ConflictResolver:
    """–†–µ–∑–æ–ª–≤–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É proposals"""

    async def detect_conflicts(
        self,
        proposals: List[Proposal]
    ) -> List[Conflict]:
        """–ù–∞–π—Ç–∏ –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É proposals"""
        conflicts = []

        for i, p1 in enumerate(proposals):
            for p2 in proposals[i+1:]:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
                if self.has_dependency_conflict(p1, p2):
                    conflicts.append(Conflict(
                        type="dependency",
                        proposals=[p1.id, p2.id],
                        description=f"{p1.id} –∏ {p2.id} –∏–º–µ—é—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
                    ))

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
                if self.has_resource_conflict(p1, p2):
                    conflicts.append(Conflict(
                        type="resource",
                        proposals=[p1.id, p2.id],
                        description=f"{p1.id} –∏ {p2.id} —Ç—Ä–µ–±—É—é—Ç –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å"
                    ))

                # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
                if await self.are_mutually_exclusive(p1, p2):
                    conflicts.append(Conflict(
                        type="semantic",
                        proposals=[p1.id, p2.id],
                        description="–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ"
                    ))

        return conflicts

    async def resolve(
        self,
        conflict: Conflict,
        proposals: List[Proposal],
        meeting_context: MeetingContext
    ) -> Resolution:
        """–†–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ –ø–æ—Ä—è–¥–∫—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–π"""

        involved = [p for p in proposals if p.id in conflict.proposals]

        # 1. –ü—Ä–æ–±—É–µ–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å
        merged = await self.try_merge(involved)
        if merged:
            return Resolution(strategy="merge", result=merged)

        # 2. –ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
        if self.has_clear_priority(involved):
            winner = max(involved, key=lambda p: p.author_priority)
            return Resolution(strategy="priority", result=winner)

        # 3. LLM –∞—Ä–±–∏—Ç—Ä–∞–∂
        try:
            winner = await self.llm_arbitrate(involved, meeting_context)
            return Resolution(strategy="llm_arbitration", result=winner)
        except ArbitrationError:
            pass

        # 4. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
        winner = await self.vote(involved, meeting_context.participants)
        if winner:
            return Resolution(strategy="voting", result=winner)

        # 5. –≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ —á–µ–ª–æ–≤–µ–∫—É
        return await self.escalate_to_human(conflict, involved)
```

### 3.8. –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–æ–≤–µ—â–∞–Ω–∏—è (–ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    MEETING PROTOCOL FLOW                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                   ‚îÇ
‚îÇ   1. INITIATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      Orchestrator –æ–±—ä—è–≤–ª—è–µ—Ç —Ç–µ–º—É, –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤             ‚îÇ
‚îÇ      Timeout: 10s –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–∏—è                      ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   2. QUORUM CHECK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Quorum –¥–æ—Å—Ç–∏–≥–Ω—É—Ç? ‚Üí –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º                         ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Quorum –ù–ï –¥–æ—Å—Ç–∏–≥–Ω—É—Ç? ‚Üí Retry (x2) ‚Üí Fallback            ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   3. PROPOSAL COLLECTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      –ê–≥–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç proposals (max 3 –Ω–∞ –∞–≥–µ–Ω—Ç–∞)               ‚îÇ
‚îÇ      Timeout: 60s, min_wait: 10s                                 ‚îÇ
‚îÇ      Anti-flood –ø—Ä–æ–≤–µ—Ä–∫–∞                                         ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   4. CONFLICT DETECTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      –ê–Ω–∞–ª–∏–∑ proposals –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã                               ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ ‚Üí –ö —Å–∏–Ω—Ç–µ–∑—É                             ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ –ï—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã ‚Üí –ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é                          ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   5. CONFLICT RESOLUTION (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      Merge ‚Üí Priority ‚Üí LLM Arbitration ‚Üí Voting ‚Üí Human         ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   6. DISCUSSION (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      –ê–≥–µ–Ω—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é—Ç proposals (max 10 –∫–æ–º–º–µ–Ω—Ç–æ–≤/–∞–≥–µ–Ω—Ç)      ‚îÇ
‚îÇ      Max 3 —Ä–∞—É–Ω–¥–∞, timeout 120s                                  ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   7. SYNTHESIS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      LLM —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω                              ‚îÇ
‚îÇ      Timeout: 30s                                                 ‚îÇ
‚îÇ      Fallback: voting –∏–ª–∏ orchestrator_decides                   ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   8. PLAN VALIDATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞–Ω–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–∏–º–æ—Å—Ç—å                              ‚îÇ
‚îÇ      Veto check (human_representative, security_agent)           ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ   9. CONCLUSION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ      –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é    ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Process Cards

### 4.1. –ü—Ä–æ–±–ª–µ–º–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫

**v1.0**: Process Card = –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π YAML —Ñ–∞–π–ª.

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å YAML.

### 4.2. –†–µ—à–µ–Ω–∏–µ: LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏

```
–ß–µ–ª–æ–≤–µ–∫: "–ù–∞–ø–∏—à–∏ –∫–Ω–∏–≥—É –ø—Ä–æ AI"
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Orchestrator + LLM Planner:            ‚îÇ
‚îÇ  "–°–≥–µ–Ω–µ—Ä–∏—Ä—É—é Process Card –¥–ª—è —ç—Ç–æ–π      ‚îÇ
‚îÇ   –∑–∞–¥–∞—á–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è"          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ù–æ–≤–∞—è Process Card (runtime):          ‚îÇ
‚îÇ  - id: process-book-ai-001              ‚îÇ
‚îÇ  - steps: [research, outline, ...]      ‚îÇ
‚îÇ  - generated_by: llm_planner            ‚îÇ
‚îÇ  - approved_by: human (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.3. –°—Ö–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Process Card

```python
class GeneratedProcessCard(BaseModel):
    """Process Card —Å–æ–∑–¥–∞–Ω–Ω–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏"""

    # –ò—Å—Ç–æ—á–Ω–∏–∫
    generation_source: Literal["llm", "template", "meeting_synthesis"]
    generation_context: Dict[str, Any]  # –ß—Ç–æ –±—ã–ª–æ –Ω–∞ –≤—Ö–æ–¥–µ

    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–ª—è
    metadata: ProcessCardMetadata
    spec: ProcessCardSpec

    # –ê—É–¥–∏—Ç
    generated_at: datetime
    generated_by: str  # ID LLM –∏–ª–∏ —à–∞–±–ª–æ–Ω–∞

    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ
    approval_required: bool = False
    approved_by: Optional[str] = None
    approved_at: Optional[datetime] = None
```

### 4.4. –®–∞–±–ª–æ–Ω—ã –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

Orchestrator –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è:

```yaml
# templates/book_creation.yaml
template:
  id: "template-book-creation"
  name: "–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"

  # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à–∞–±–ª–æ–Ω–∞ (–∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è)
  parameters:
    topic: {type: string, required: true}
    genre: {type: string, default: "non-fiction"}
    target_pages: {type: integer, default: 200}

  # –®–∞–±–ª–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏
  spec:
    variables:
      topic: "{{ params.topic }}"
      genre: "{{ params.genre }}"

    steps:
      - id: research
        action: research_topic
        params:
          topic: "{{ variables.topic }}"

      - id: outline
        action: create_outline
        params:
          style: "{{ variables.genre }}"
        depends_on: [research]

      # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
```

### 4.5. Sandboxing –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤**: "LLM –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∞—Å–Ω—É—é –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É. –ù—É–∂–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞."

#### 4.5.1. –£—Ä–æ–≤–Ω–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```yaml
validation_levels:
  # –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
  syntax:
    enabled: true
    checks:
      - "yaml_valid"              # –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π YAML
      - "json_schema_valid"       # –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ JSON Schema
      - "required_fields_present" # –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –µ—Å—Ç—å

  # –£—Ä–æ–≤–µ–Ω—å 2: –°–µ–º–∞–Ω—Ç–∏–∫–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
  semantic:
    enabled: true
    checks:
      - "step_ids_unique"         # ID —à–∞–≥–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã
      - "dependencies_exist"      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–≥–∏
      - "no_circular_deps"        # –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
      - "actions_registered"      # –í—Å–µ actions –µ—Å—Ç—å –≤ —Ä–µ–µ—Å—Ç—Ä–µ
      - "variables_defined"       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

  # –£—Ä–æ–≤–µ–Ω—å 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è LLM-generated)
  security:
    enabled: true
    checks:
      - "no_shell_injection"      # –ù–µ—Ç –∫–æ–º–∞–Ω–¥ shell –≤ params
      - "no_path_traversal"       # –ù–µ—Ç ../../../ –≤ –ø—É—Ç—è—Ö
      - "allowed_actions_only"    # –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ actions
      - "budget_within_limits"    # –ë—é–¥–∂–µ—Ç –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π
      - "max_steps_check"         # –ù–µ –±–æ–ª—å—à–µ N —à–∞–≥–æ–≤
      - "no_infinite_loops"       # –ù–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤

  # –£—Ä–æ–≤–µ–Ω—å 4: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  business:
    enabled: true
    checks:
      - "capabilities_available"  # –ï—Å—Ç—å –∞–≥–µ–Ω—Ç—ã —Å –Ω—É–∂–Ω—ã–º–∏ capabilities
      - "budget_sufficient"       # –ë—é–¥–∂–µ—Ç–∞ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ –≤—Å–µ —à–∞–≥–∏
      - "deadline_achievable"     # Deadline —Ä–µ–∞–ª–∏—Å—Ç–∏—á–µ–Ω
```

#### 4.5.2. Whitelist —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

```yaml
action_whitelist:
  # –ë–∞–∑–æ–≤—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
  safe_actions:
    - "text_generation"
    - "text_analysis"
    - "text_review"
    - "summarize"
    - "translate"
    - "research_topic"          # –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ

  # –î–µ–π—Å—Ç–≤–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
  restricted_actions:
    - action: "web_search"
      restrictions:
        max_queries_per_step: 10
        allowed_domains: ["*"]   # –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å

    - action: "file_read"
      restrictions:
        allowed_paths: ["./workspace/*"]
        max_file_size_mb: 10

    - action: "file_write"
      restrictions:
        allowed_paths: ["./workspace/output/*"]
        require_approval: true   # –¢—Ä–µ–±—É–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è

  # –ó–ê–ü–†–ï–©–Å–ù–ù–´–ï –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∏–∫–æ–≥–¥–∞)
  forbidden_actions:
    - "shell_execute"           # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
    - "network_raw"             # –°—ã—Ä—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    - "system_modify"           # –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
    - "credential_access"       # –î–æ—Å—Ç—É–ø –∫ credentials
```

#### 4.5.3. Sandbox –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

```yaml
sandbox_config:
  # –ò–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
  resource_isolation:
    max_memory_mb: 512          # –ú–∞–∫—Å–∏–º—É–º –ø–∞–º—è—Ç–∏
    max_cpu_percent: 50         # –ú–∞–∫—Å–∏–º—É–º CPU
    max_execution_time_seconds: 300  # –¢–∞–π–º–∞—É—Ç

  # –ò–∑–æ–ª—è—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
  filesystem_isolation:
    enabled: true
    root_directory: "/sandbox/process-{process_id}"
    read_only_paths:
      - "/templates"
      - "/schemas"
    writable_paths:
      - "/sandbox/process-{process_id}/output"

  # –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è
  network_isolation:
    enabled: true
    allow_internal_only: true   # –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å AI_TEAM
    blocked_ports: [22, 23, 3389]  # SSH, Telnet, RDP

  # –ê—É–¥–∏—Ç
  audit:
    log_all_actions: true
    log_file: "/var/log/ai_team/sandbox/{process_id}.log"
```

#### 4.5.4. Workflow –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```python
class DynamicCardValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö Process Cards"""

    async def validate(
        self,
        card: GeneratedProcessCard,
        context: ValidationContext
    ) -> ValidationResult:
        """
        –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏.
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç PASS/FAIL + —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.
        """
        errors = []
        warnings = []

        # –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å
        syntax_result = self.validate_syntax(card)
        if not syntax_result.passed:
            return ValidationResult(
                passed=False,
                level="syntax",
                errors=syntax_result.errors
            )

        # –£—Ä–æ–≤–µ–Ω—å 2: –°–µ–º–∞–Ω—Ç–∏–∫–∞
        semantic_result = self.validate_semantic(card)
        if not semantic_result.passed:
            return ValidationResult(
                passed=False,
                level="semantic",
                errors=semantic_result.errors
            )

        # –£—Ä–æ–≤–µ–Ω—å 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è LLM-generated)
        if card.generation_source == "llm":
            security_result = await self.validate_security(card, context)
            if not security_result.passed:
                # –õ–æ–≥–∏—Ä—É–µ–º –ø–æ–ø—ã—Ç–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–∞—Å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
                await self.log_security_violation(card, security_result)
                return ValidationResult(
                    passed=False,
                    level="security",
                    errors=security_result.errors
                )

        # –£—Ä–æ–≤–µ–Ω—å 4: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç)
        business_result = await self.validate_business(card, context)
        warnings.extend(business_result.warnings)

        return ValidationResult(
            passed=True,
            errors=[],
            warnings=warnings
        )

    def validate_security(
        self,
        card: GeneratedProcessCard,
        context: ValidationContext
    ) -> SecurityValidationResult:
        """–ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"""
        errors = []

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ whitelist
        for step in card.spec.steps:
            if step.action in self.forbidden_actions:
                errors.append(SecurityError(
                    code="FORBIDDEN_ACTION",
                    step_id=step.id,
                    action=step.action,
                    message=f"Action '{step.action}' is forbidden"
                ))

            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ –∏–Ω—ä–µ–∫—Ü–∏–∏
            if self.has_injection(step.params):
                errors.append(SecurityError(
                    code="POSSIBLE_INJECTION",
                    step_id=step.id,
                    message="Parameters contain possible injection patterns"
                ))

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—é–¥–∂–µ—Ç–∞
        if card.spec.budget:
            parent_budget = context.parent_process.budget_remaining
            if card.spec.budget.max_cost_usd > parent_budget.max_cost_usd:
                errors.append(SecurityError(
                    code="BUDGET_EXCEEDS_PARENT",
                    message="Requested budget exceeds parent process budget"
                ))

        return SecurityValidationResult(
            passed=len(errors) == 0,
            errors=errors
        )
```

#### 4.5.5. Approval workflow –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫

```yaml
approval_workflow:
  # –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞
  require_human_approval_if:
    - "card.spec.budget.max_cost_usd > 10"     # –î–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
    - "card.spec.steps.count > 20"              # –ú–Ω–æ–≥–æ —à–∞–≥–æ–≤
    - "card.spec.max_depth > 3"                 # –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
    - "restricted_actions in card.actions"      # –ï—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
    - "card.generation_source == 'llm'"         # –°–æ–∑–¥–∞–Ω–æ LLM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

  # –ü—Ä–æ—Ü–µ—Å—Å –æ–¥–æ–±—Ä–µ–Ω–∏—è
  approval_process:
    notification:
      channels: ["slack", "email"]
      message_template: |
        üîî –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ Process Card
        ID: {card.id}
        –ò—Å—Ç–æ—á–Ω–∏–∫: {card.generation_source}
        –®–∞–≥–æ–≤: {card.spec.steps.count}
        –ë—é–¥–∂–µ—Ç: ${card.spec.budget.max_cost_usd}
        –°—Å—ã–ª–∫–∞: {approval_url}

    timeout_hours: 24
    on_timeout: "reject"

    # –ö—Ç–æ –º–æ–∂–µ—Ç –æ–¥–æ–±—Ä–∏—Ç—å
    approvers:
      - role: "project_owner"
      - role: "admin"
      - explicit_user_id: "{root_context.human_contact}"

  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ (–¥–ª—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
  auto_approve_if:
    - "card.generation_source == 'template'"
    - "card.generated_by in trusted_generators"
    - "card.spec.budget.max_cost_usd < 1 AND card.spec.steps.count < 5"
```

---

## 5. State Contract (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤**: "State Management –æ–ø–∏—Å–∞–Ω –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ –∫–∞–∫ SSOT-–∫–æ–Ω—Ç—Ä–∞–∫—Ç. –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è? –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è? –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å?"

### 5.1. –ü—Ä–∏–Ω—Ü–∏–ø: Orchestrator = Stateless

**Orchestrator –ù–ï —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏**. –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **Process State Store**.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Orchestrator  ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ    Process State Store      ‚îÇ
‚îÇ   (Stateless)   ‚îÇ         ‚îÇ    (PostgreSQL / SQLite)    ‚îÇ
‚îÇ                 ‚îÇ         ‚îÇ                             ‚îÇ
‚îÇ   Crash?        ‚îÇ         ‚îÇ   –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!      ‚îÇ
‚îÇ   Restart!      ‚îÇ         ‚îÇ   –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞.  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 5.2. –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ State Store

```python
class ProcessStateRecord(BaseModel):
    """–ó–∞–ø–∏—Å—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –ë–î"""

    # === –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ===
    process_id: str                    # PK
    root_process_id: str               # ID –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
    parent_process_id: Optional[str]   # –†–æ–¥–∏—Ç–µ–ª—å (–¥–ª—è –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

    # === –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ===
    version: int                       # –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
    updated_at: datetime

    # === –§–∞–∑–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å ===
    phase: ProcessPhase                # PENDING, RUNNING, COMPLETED, FAILED
    current_step_id: Optional[str]
    steps_completed: List[str]
    steps_failed: List[str]

    # === –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ ===
    variables: Dict[str, Any]          # JSON

    # === –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ ===
    trace_id: str                      # W3C Trace ID
    span_id: str

    # === –ë—é–¥–∂–µ—Ç ===
    budget_allocated: ProcessBudget
    budget_spent: BudgetUsage

    # === –û–∂–∏–¥–∞—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã ===
    pending_commands: List[PendingCommand]  # COMMAND –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –∂–¥—ë–º RESULT

    # === –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (root_context) ===
    root_context: Dict[str, Any]       # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—Ç –∫–æ—Ä–Ω—è


class PendingCommand(BaseModel):
    """–ö–æ–º–∞–Ω–¥–∞, –æ–∂–∏–¥–∞—é—â–∞—è –æ—Ç–≤–µ—Ç–∞"""
    command_id: str
    step_id: str
    sent_at: datetime
    timeout_at: datetime
    idempotency_key: str               # –î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–µ–π
    retry_count: int = 0
```

### 5.3. –ö–æ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```yaml
state_persistence_points:
  # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ—Ö—Ä–∞–Ω—è—Ç—å:
  mandatory:
    - "–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞"
    - "–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π COMMAND"
    - "–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è RESULT/ERROR"
    - "–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–∑—ã –ø—Ä–æ—Ü–µ—Å—Å–∞"
    - "–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö"

  # –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û (–¥–ª—è production):
  optional:
    - "–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (heartbeat –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)"
    - "–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞"
```

### 5.4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è (Recovery)

```python
async def recover_after_restart():
    """–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ Orchestrator"""

    # 1. –ù–∞–π—Ç–∏ –≤—Å–µ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
    active_processes = await state_store.find_by_phase(
        phases=[ProcessPhase.RUNNING, ProcessPhase.PENDING]
    )

    for process in active_processes:
        # 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å pending commands
        for cmd in process.pending_commands:
            if cmd.timeout_at < datetime.utcnow():
                # Timeout ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ failed, retry –µ—Å–ª–∏ –º–æ–∂–Ω–æ
                await handle_timeout(process, cmd)
            else:
                # –ï—â—ë –Ω–µ timeout ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∂–¥–∞—Ç—å
                await resubscribe_for_response(cmd)

        # 3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        if process.phase == ProcessPhase.RUNNING:
            await resume_execution(process)


async def handle_timeout(process: ProcessStateRecord, cmd: PendingCommand):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ timeout –¥–ª—è pending command"""

    if cmd.retry_count < process.budget_allocated.max_retries:
        # Retry —Å —Ç–µ–º –∂–µ idempotency_key
        cmd.retry_count += 1
        cmd.timeout_at = datetime.utcnow() + timedelta(seconds=calculate_backoff(cmd.retry_count))
        await resend_command(cmd)
    else:
        # –õ–∏–º–∏—Ç retry –∏—Å—á–µ—Ä–ø–∞–Ω ‚Äî escalate
        await mark_step_failed(process, cmd.step_id, "TIMEOUT_EXHAUSTED")
```

### 5.5. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π)

```yaml
idempotency:
  # –ö–∞–∂–¥—ã–π COMMAND –∏–º–µ–µ—Ç idempotency_key
  command_idempotency:
    format: "{process_id}:{step_id}:{attempt}"
    example: "proc-001:step-research:1"

  # –ê–≥–µ–Ω—Ç MUST —Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
  agent_requirements:
    - "–•—Ä–∞–Ω–∏—Ç—å processed_keys TTL=24h"
    - "–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º COMMAND —Å —Ç–µ–º –∂–µ –∫–ª—é—á–æ–º ‚Äî –≤–µ—Ä–Ω—É—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π RESULT"
    - "–ù–ï –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ"

  # Orchestrator –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏ RESULT
  result_deduplication:
    - "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å RESULT –µ—Å–ª–∏ step —É–∂–µ COMPLETED"
    - "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏"
```

### 5.6. –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (Concurrency Control)

```python
async def update_process_state(
    process_id: str,
    expected_version: int,
    new_state: ProcessStateRecord
) -> bool:
    """
    –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–µ—Ä—Å–∏–∏.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç False –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ).
    """

    result = await db.execute("""
        UPDATE process_states
        SET
            phase = :phase,
            current_step_id = :current_step_id,
            variables = :variables,
            version = version + 1,
            updated_at = NOW()
        WHERE
            process_id = :process_id
            AND version = :expected_version
    """, {
        "process_id": process_id,
        "expected_version": expected_version,
        "phase": new_state.phase,
        "current_step_id": new_state.current_step_id,
        "variables": json.dumps(new_state.variables)
    })

    return result.rowcount == 1  # True –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–æ


# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
async def safe_state_update(process_id: str, mutation: Callable):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å retry –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ"""

    for attempt in range(3):
        state = await state_store.load(process_id)
        new_state = mutation(state)

        if await update_process_state(process_id, state.version, new_state):
            return new_state  # –£—Å–ø–µ—Ö

        # –ö–æ–Ω—Ñ–ª–∏–∫—Ç ‚Äî retry
        await asyncio.sleep(0.1 * (attempt + 1))

    raise ConcurrencyError(f"Failed to update {process_id} after 3 attempts")
```

### 5.7. Root Context (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ 2**: "–ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ 5-–º —É—Ä–æ–≤–Ω–µ –º–æ–∂–µ—Ç –∑–∞–±—ã—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"

```yaml
root_context:
  description: "–ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞"

  # –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç:
  includes:
    - style_guide: "Tone of voice, —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è"
    - quality_criteria: "–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π"
    - global_constraints: "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å X, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ Y)"
    - budget_total: "–û–±—â–∏–π –±—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞"
    - human_contact: "–ö–æ–≥–æ –∑–≤–∞—Ç—å –ø—Ä–∏ escalation"

  # –ü—Ä–∞–≤–∏–ª–∞:
  rules:
    - "root_context –°–û–ó–î–ê–Å–¢–°–Ø —Ç–æ–ª—å–∫–æ –∫–æ—Ä–Ω–µ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º"
    - "root_context –ö–û–ü–ò–†–£–ï–¢–°–Ø –≤–æ –≤—Å–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã"
    - "root_context –ù–ï–õ–¨–ó–Ø –∏–∑–º–µ–Ω–∏—Ç—å –∏–∑ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞"
    - "–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ: root_context > local_context"
```

### 5.8. Boundary Artifacts (–≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ 2**: "–ù—É–∂–Ω—ã —á—ë—Ç–∫–∏–µ –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã –¥–ª—è –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤"

```yaml
# –í Process Card:
steps:
  - id: research-phase
    type: subprocess_ref
    ref: "templates/research-phase.yaml"

    # –Ø–í–ù–´–ï –≤—Ö–æ–¥—ã (—á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å)
    inputs:
      topic: "{{ variables.book_topic }}"
      constraints: "{{ root_context.style_guide }}"

    # –Ø–í–ù–´–ï –≤—ã—Ö–æ–¥—ã (—á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å)
    outputs:
      report: "research_report"      # ‚Üí variables.research_report
      sources: "research_sources"    # ‚Üí variables.research_sources

    # –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å –ù–ï –í–ò–î–ò–¢ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    isolation: true
```

```python
class SubprocessBoundary(BaseModel):
    """–ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞"""

    # –í—Ö–æ–¥—ã (—Ä–æ–¥–∏—Ç–µ–ª—å ‚Üí –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å)
    inputs: Dict[str, Any]

    # –û–∂–∏–¥–∞–µ–º—ã–µ –≤—ã—Ö–æ–¥—ã (–ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å ‚Üí —Ä–æ–¥–∏—Ç–µ–ª—å)
    expected_outputs: List[str]

    # –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ö–æ–¥—ã (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏)
    actual_outputs: Optional[Dict[str, Any]] = None

    # –ò–∑–æ–ª—è—Ü–∏—è
    isolation: bool = True  # –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –≤–∏–¥–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–∞–ø—Ä—è–º—É—é

    def validate_outputs(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –æ–∂–∏–¥–∞–µ–º—ã–µ –≤—ã—Ö–æ–¥—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã"""
        if self.actual_outputs is None:
            return False
        return all(key in self.actual_outputs for key in self.expected_outputs)
```

### 5.9. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –∏ Locking

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ 2**: "Race conditions –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏"

```yaml
parallel_execution:
  # –ü—Ä–æ–±–ª–µ–º–∞: –¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —à–∞–≥–∞ –ø–∏—à—É—Ç –≤ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
  problem:
    step_a: "writes to variables.result"
    step_b: "writes to variables.result"
    # ‚Üí –ö—Ç–æ –ø–æ–±–µ–¥–∏—Ç? –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö!

  # –†–µ—à–µ–Ω–∏–µ 1: Namespace isolation
  solution_namespace:
    step_a:
      output_namespace: "step_a"  # ‚Üí variables.step_a.result
    step_b:
      output_namespace: "step_b"  # ‚Üí variables.step_b.result

  # –†–µ—à–µ–Ω–∏–µ 2: Merge strategy
  solution_merge:
    step_a:
      output: "result"
      merge_strategy: "append"  # –î–æ–±–∞–≤–∏—Ç—å –∫ —Å–ø–∏—Å–∫—É
    step_b:
      output: "result"
      merge_strategy: "append"

  # –†–µ—à–µ–Ω–∏–µ 3: Explicit lock (–¥–ª—è critical sections)
  solution_lock:
    step_a:
      requires_lock: "shared_resource"
      lock_timeout_seconds: 30
```

---

## 6. –ò–µ—Ä–∞—Ä—Ö–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)

### 5.1. –ü—Ä–æ–±–ª–µ–º–∞ –ø–ª–æ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**v1.0**: –í—Å–µ —à–∞–≥–∏ –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ.

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—Ç –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ —à–∞–≥–æ–≤.

### 5.2. –†–µ—à–µ–Ω–∏–µ: –í–ª–æ–∂–µ–Ω–Ω—ã–µ Process Cards

```
–ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å: "–ù–∞–ø–∏—Å–∞—Ç—å –∫–Ω–∏–≥—É"
‚îÇ
‚îú‚îÄ‚îÄ –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å: "–≠—Ç–∞–ø 1: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ"
‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥: –ù–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥: –ò–∑—É—á–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ –®–∞–≥: –°–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç
‚îÇ
‚îú‚îÄ‚îÄ –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å: "–≠—Ç–∞–ø 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞"
‚îÇ   ‚îú‚îÄ‚îÄ –®–∞–≥: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–ª–∞–≤—ã
‚îÇ   ‚îî‚îÄ‚îÄ –®–∞–≥: –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ–∑–∏—Å—ã
‚îÇ
‚îú‚îÄ‚îÄ –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å: "–≠—Ç–∞–ø 3: –ù–∞–ø–∏—Å–∞–Ω–∏–µ" (–¶–ò–ö–õ x10 –≥–ª–∞–≤)
‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ–¥-–ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å: "–ù–∞–ø–∏—Å–∞—Ç—å –≥–ª–∞–≤—É N"
‚îÇ       ‚îú‚îÄ‚îÄ –®–∞–≥: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≥–ª–∞–≤—ã
‚îÇ       ‚îú‚îÄ‚îÄ –®–∞–≥: –ß–µ—Ä–Ω–æ–≤–∏–∫
‚îÇ       ‚îú‚îÄ‚îÄ –®–∞–≥: –†–µ–¥–∞–∫—Ç—É—Ä–∞
‚îÇ       ‚îî‚îÄ‚îÄ –®–∞–≥: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å: "–≠—Ç–∞–ø 4: –ü—É–±–ª–∏–∫–∞—Ü–∏—è"
    ‚îî‚îÄ‚îÄ ...
```

### 5.3. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –≤ Process Card

```yaml
# –í–∞—Ä–∏–∞–Ω—Ç A: Inline –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å
steps:
  - id: research-phase
    type: subprocess  # –ù–µ action, –∞ subprocess!
    subprocess:
      id: research-subprocess
      steps:
        - id: find-sources
          action: web_search
        - id: analyze-competitors
          action: text_analysis
        - id: create-report
          action: summarize

  - id: write-chapters
    type: subprocess_loop  # –¶–∏–∫–ª –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    loop:
      count: 10  # –∏–ª–∏ from_variable: "chapter_count"
    subprocess:
      id: write-chapter-{{ loop.index }}
      steps:
        - id: research-chapter
          action: research_topic
          params:
            topic: "{{ parent.outline.chapters[loop.index].title }}"
        - id: write-draft
          action: text_generation
        - id: review
          action: text_review
```

```yaml
# –í–∞—Ä–∏–∞–Ω—Ç B: –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å
steps:
  - id: research-phase
    type: subprocess_ref
    ref: "templates/research-phase.yaml"
    inputs:
      topic: "{{ variables.book_topic }}"
    outputs:
      report: research_report

  - id: write-chapters
    type: subprocess_loop
    loop:
      count: "{{ variables.chapter_count }}"
    subprocess_ref: "templates/write-chapter.yaml"
    inputs:
      chapter_number: "{{ loop.index }}"
      chapter_title: "{{ variables.outline.chapters[loop.index].title }}"
```

### 5.4. –ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```python
class HierarchicalProcessState(BaseModel):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π"""

    # –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏
    process_id: str
    parent_process_id: Optional[str] = None  # None = –∫–æ—Ä–Ω–µ–≤–æ–π
    root_process_id: str  # –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ—Ä–µ–Ω—å
    depth: int = 0  # –£—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (0 = –∫–æ—Ä–µ–Ω—å)

    # –ü—É—Ç—å –≤ –¥–µ—Ä–µ–≤–µ
    path: List[str] = []  # ["root-001", "research-001", "find-sources-001"]

    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–ª—è –∏–∑ v1.0
    phase: ProcessPhase
    current_step_id: Optional[str]
    steps: Dict[str, StepState]
    variables: Dict[str, Any]

    # –î–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
    children: Dict[str, "HierarchicalProcessState"] = {}

    # –ë—é–¥–∂–µ—Ç (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è)
    budget: ProcessBudget
    budget_spent: BudgetUsage
```

### 5.5. –õ–∏–º–∏—Ç—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏

```yaml
# config/orchestrator.yaml
hierarchy:
  max_depth: 10              # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
  max_total_steps: 1000      # –í—Å–µ–≥–æ —à–∞–≥–æ–≤ –≤–æ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
  max_children_per_process: 50  # –ú–∞–∫—Å–∏–º—É–º –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

  # –ó–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–æ–≤
  cycle_detection: true
  visited_cards_cache_ttl: 3600  # –ö—ç—à –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤
```

---

## 6. –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Å—Ç–µ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 6.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ ORCHESTRATOR_COGNITIVE_STACK_v0.1)

Orchestrator —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∞–º–∏ –∫–∞–∫ **–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

### 6.2. State Machine –¥–ª—è –∑–∞–¥–∞—á

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PENDING   ‚îÇ ‚îÄ‚îÄ‚îÄ –ó–∞–¥–∞—á–∞ –ø–æ—Å—Ç—É–ø–∏–ª–∞, –∂–¥—ë—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ start_planning()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ RESEARCHING ‚îÇ ‚îÄ‚îÄ‚îÄ –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ research_complete()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PLANNING   ‚îÇ ‚îÄ‚îÄ‚îÄ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ (—Å–æ–≤–µ—â–∞–Ω–∏–µ —Å –∞–≥–µ–Ω—Ç–∞–º–∏)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ plan_approved()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  EXECUTING  ‚îÇ ‚îÄ‚îÄ‚îÄ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ step_failed() ‚îÄ‚îÄ‚îÄ‚ñ∫ RETRY
       ‚îÇ                          ‚îÇ
       ‚îÇ                          ‚îÇ retry_limit_reached()
       ‚îÇ                          ‚ñº
       ‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ                    ‚îÇ ESCALATED   ‚îÇ
       ‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ step_completed() + needs_critique()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CRITIQUE   ‚îÇ ‚îÄ‚îÄ‚îÄ –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ quality_low() ‚îÄ‚îÄ‚îÄ‚ñ∫ REFACTORING
       ‚îÇ                          ‚îÇ
       ‚îÇ                          ‚îÇ refactored()
       ‚îÇ                          ‚ñº
       ‚îÇ                       EXECUTING (–ø–æ–≤—Ç–æ—Ä)
       ‚îÇ
       ‚îÇ quality_ok()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ FINALIZING  ‚îÇ ‚îÄ‚îÄ‚îÄ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ finalize()
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  COMPLETED  ‚îÇ ‚îÄ‚îÄ‚îÄ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 6.3. Internal Economy (–±—é–¥–∂–µ—Ç—ã)

```yaml
# –ë—é–¥–∂–µ—Ç –∑–∞–¥–∞—á–∏
budget:
  # –†–µ—Å—É—Ä—Å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  max_iterations: 10        # –¶–∏–∫–ª–æ–≤ —É–ª—É—á—à–µ–Ω–∏—è
  max_llm_calls: 100        # –í—ã–∑–æ–≤–æ–≤ LLM
  max_cost_usd: 5.00        # –î–µ–Ω–µ–∂–Ω—ã–π –ª–∏–º–∏—Ç
  max_time_minutes: 120     # –í—Ä–µ–º–µ–Ω–Ω–æ–π –ª–∏–º–∏—Ç

  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ–¥-–∑–∞–¥–∞—á–∞–º–∏
  distribution_strategy: "proportional"  # –∏–ª–∏ "fixed", "dynamic"

  # –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏
  on_budget_exhausted: "escalate"  # –∏–ª–∏ "stop", "request_extension"
```

### 6.4. Triangle of Quality (—Ç—Ä–∏ –∞–≥–µ–Ω—Ç–∞)

–î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ö–µ–º–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  EXECUTOR    ‚îÇ ‚îÄ‚îÄ‚îÄ –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É
‚îÇ  (Writer)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ result
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CRITIC     ‚îÇ ‚îÄ‚îÄ‚îÄ –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ
‚îÇ  (Reviewer)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ feedback
       ‚îú‚îÄ‚îÄ‚îÄ PASS ‚îÄ‚îÄ‚îÄ‚ñ∫ –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
       ‚îÇ
       ‚îÇ FAIL
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ARBITRATOR  ‚îÇ ‚îÄ‚îÄ‚îÄ –†–∞–∑—Ä–µ—à–∞–µ—Ç —Å–ø–æ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ (Senior/LLM) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ decision
       ‚ñº
    EXECUTOR (–ø–æ–≤—Ç–æ—Ä) –∏–ª–∏ ESCALATE
```

---

## 7. –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á

### 7.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ ORCHESTRATOR_BRAIN_DYNAMICS_v0.1)

**Top-Down –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è**: –ë–æ–ª—å—à–∞—è –∑–∞–¥–∞—á–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å—Å—è –µ—â—ë –≥–ª—É–±–∂–µ.

### 7.2. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

```python
def decompose_recursively(task: Task, depth: int = 0) -> HierarchicalProcess:
    """
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á–∏.

    –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞:
    1. –ó–∞–¥–∞—á–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞—è (–æ–¥–∏–Ω –∞–≥–µ–Ω—Ç, –æ–¥–∏–Ω —à–∞–≥)
    2. –ö–æ–º–∞–Ω–¥–∞ —Ä–µ—à–∏–ª–∞ "—Ö–≤–∞—Ç–∏—Ç –¥—Ä–æ–±–∏—Ç—å"
    3. –î–æ—Å—Ç–∏–≥–Ω—É—Ç max_depth
    4. –ò—Å—á–µ—Ä–ø–∞–Ω –±—é–¥–∂–µ—Ç –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    """

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
    if depth >= config.max_depth:
        return create_atomic_process(task)

    # –°–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É: –Ω—É–∂–Ω–æ –ª–∏ –¥—Ä–æ–±–∏—Ç—å?
    meeting_result = convene_planning_meeting(
        topic=f"–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å: {task.description}",
        question="–≠—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ –Ω—É–∂–Ω–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è?"
    )

    if meeting_result.decision == "atomic":
        # –ö–æ–º–∞–Ω–¥–∞ —Ä–µ—à–∏–ª–∞: –∑–∞–¥–∞—á–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞—è
        return create_atomic_process(task)

    # –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è
    subtasks = meeting_result.proposed_subtasks

    # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é –ø–æ–¥–∑–∞–¥–∞—á—É
    subprocesses = []
    for subtask in subtasks:
        subprocess = decompose_recursively(subtask, depth + 1)
        subprocesses.append(subprocess)

    return create_composite_process(task, subprocesses)
```

### 7.3. –ö—Ä–∏—Ç–µ—Ä–∏–∏ "–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏" –∑–∞–¥–∞—á–∏

–ó–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ–π –µ—Å–ª–∏:

```yaml
atomicity_criteria:
  # –õ—é–±–æ–µ –∏–∑ —É—Å–ª–æ–≤–∏–π = –∑–∞–¥–∞—á–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞—è
  any_of:
    - single_agent: true       # –û–¥–∏–Ω –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å
    - single_action: true      # –û–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ
    - estimated_time: "<30m"   # –ë—ã—Å—Ç—Ä–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    - team_consensus: "atomic" # –ö–æ–º–∞–Ω–¥–∞ —Ç–∞–∫ —Ä–µ—à–∏–ª–∞

  # –ò—Å–∫–ª—é—á–µ–Ω–∏—è (–¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ –≤—ã—à–µ = true)
  except_if:
    - complexity_score: ">8"   # –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ
    - requires_research: true  # –ù—É–∂–Ω–æ –∏–∑—É—á–µ–Ω–∏–µ
```

### 7.4. –ö–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏

–ü—Ä–∏ "–ø—Ä–æ–≤–∞–ª–∏–≤–∞–Ω–∏–∏" –Ω–∞ –Ω–∏–∂–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç:

```yaml
context_propagation:
  # –ß—Ç–æ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è
  inherit:
    - trace_id           # –î–ª—è —Å–≤—è–∑–∏ –ª–æ–≥–æ–≤
    - root_process_id    # –ó–Ω–∞—Ç—å –∫–æ—Ä–µ–Ω—å
    - budget_remaining   # –û—Å—Ç–∞—Ç–æ–∫ –±—é–¥–∂–µ—Ç–∞
    - quality_criteria   # –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞
    - variables          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∫–æ–ø–∏—è –∏–ª–∏ —Å—Å—ã–ª–∫–∞)

  # –ß—Ç–æ –ù–ï –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è
  isolate:
    - step_history       # –°–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è
    - retry_counts       # –°–≤–æ–∏ —Å—á—ë—Ç—á–∏–∫–∏
```

---

## 8. Quality Loop (–ø–µ—Ç–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)

### 8.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ ORCHESTRATOR_BRAIN_DYNAMICS_v0.1)

**Quality Loop** ‚Äî —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

### 8.2. –ê–ª–≥–æ—Ä–∏—Ç–º Quality Loop

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    QUALITY LOOP                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ   1. DISPATCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ      –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é                   ‚îÇ   ‚îÇ
‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ                                                      ‚ñº   ‚îÇ
‚îÇ   2. INGEST ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ      –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç                              ‚îÇ   ‚îÇ
‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ                                                      ‚ñº   ‚îÇ
‚îÇ   3. EVALUATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ      –û—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (Critic –∞–≥–µ–Ω—Ç –∏–ª–∏ LLM)        ‚îÇ   ‚îÇ
‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ   ‚îÇ
‚îÇ      ‚ñº                ‚ñº                ‚ñº            ‚îÇ   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ PASS ‚îÇ       ‚îÇ MARGINAL ‚îÇ     ‚îÇ   FAIL   ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚â•90% ‚îÇ       ‚îÇ  70-90%  ‚îÇ     ‚îÇ   <70%   ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ      ‚îÇ                ‚îÇ                 ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ      ‚ñº                ‚ñº                 ‚ñº           ‚îÇ   ‚îÇ
‚îÇ   ACCEPT         IMPROVE?           RETRY?          ‚îÇ   ‚îÇ
‚îÇ   ‚Üí Done         (ask team)        (check budget)   ‚îÇ   ‚îÇ
‚îÇ                      ‚îÇ                 ‚îÇ            ‚îÇ   ‚îÇ
‚îÇ                      ‚ñº                 ‚ñº            ‚îÇ   ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  4. DECISION TREE           ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ                             ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  IF budget_ok AND          ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ     attempts < max:         ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ       ‚Üí RETRY with feedback ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ                             ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  ELSE:                      ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ       ‚Üí ESCALATE to human   ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ   ‚îÇ
‚îÇ                                                     ‚îÇ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 8.3. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞

```yaml
# –í Process Card –∏–ª–∏ step
quality:
  criteria:
    - name: "completeness"
      description: "–í—Å–µ –ª–∏ –∞—Å–ø–µ–∫—Ç—ã —Ç–µ–º—ã —Ä–∞—Å–∫—Ä—ã—Ç—ã?"
      weight: 0.3

    - name: "accuracy"
      description: "–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å"
      weight: 0.4

    - name: "style"
      description: "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∏–ª—é"
      weight: 0.2

    - name: "originality"
      description: "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–µ –ø–ª–∞–≥–∏–∞—Ç"
      weight: 0.1

  thresholds:
    pass: 0.9
    marginal: 0.7
    fail: 0.0

  evaluator:
    type: "critic_agent"  # –∏–ª–∏ "llm", "human"
    agent_requirements: ["text_review", "fact_checking"]
```

### 8.4. Feedback –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

–ü—Ä–∏ RETRY Orchestrator —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç feedback:

```json
{
  "attempt": 2,
  "previous_score": 0.65,
  "feedback": {
    "completeness": {
      "score": 0.5,
      "issues": ["–ù–µ —Ä–∞—Å–∫—Ä—ã—Ç–∞ —Ç–µ–º–∞ X", "–ü—Ä–æ–ø—É—â–µ–Ω —Ä–∞–∑–¥–µ–ª Y"]
    },
    "accuracy": {
      "score": 0.8,
      "issues": ["–£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–µ 3"]
    }
  },
  "suggestions": [
    "–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª –ø—Ä–æ X",
    "–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
    "–†–∞—Å—à–∏—Ä–∏—Ç—å –∑–∞–∫–ª—é—á–µ–Ω–∏–µ"
  ]
}
```

---

## 9. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Process Cards

### 9.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ PROCESS_CARD_INTERPRETER_v0.2)

**–ú–µ—Ç–∞—Ñ–æ—Ä–∞**: Orchestrator = –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä + —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥ (ISA)

- **Process Card** = "–ø—Ä–æ–≥—Ä–∞–º–º–∞" (–¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
- **Orchestrator** = "–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä" (—á–∏—Ç–∞–µ—Ç, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç, –≤—ã–ø–æ–ª–Ω—è–µ—Ç)

### 9.2. –ü–∞–π–ø–ª–∞–π–Ω –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              PROCESS CARD INTERPRETER                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ  1. PARSE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ     YAML/JSON ‚Üí Internal AST                             ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  2. VALIDATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ     JSON Schema, —Ü–∏–∫–ª—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏                      ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  3. COMPILE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ     AST ‚Üí Execution Graph (DAG)                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  4. OPTIMIZE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ     –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è, —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞            ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  5. EXECUTE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ
‚îÇ     Step-by-step execution engine                        ‚îÇ
‚îÇ                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 9.3. –í–∞–ª–∏–¥–∞—Ü–∏—è Process Card

```python
class ProcessCardValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä Process Cards"""

    def validate(self, card: ProcessCard) -> ValidationResult:
        errors = []
        warnings = []

        # 1. Schema validation
        errors.extend(self.validate_schema(card))

        # 2. Step references check
        errors.extend(self.validate_step_references(card))

        # 3. Cycle detection
        if self.has_cycles(card):
            errors.append(ValidationError(
                code="CYCLE_DETECTED",
                message="Circular dependency in steps",
                location=self.find_cycle(card)
            ))

        # 4. Variable resolution
        errors.extend(self.validate_variables(card))

        # 5. Capability availability (warning, not error)
        warnings.extend(self.check_capability_availability(card))

        return ValidationResult(
            valid=len(errors) == 0,
            errors=errors,
            warnings=warnings
        )
```

### 9.4. –°–µ–º–∞–Ω—Ç–∏–∫–∞ —Ç–∏–ø–æ–≤ —à–∞–≥–æ–≤

```yaml
step_types:
  # Action step ‚Äî –≤—ã–∑–æ–≤ –∞–≥–µ–Ω—Ç–∞
  action:
    executor: "agent"
    requires: ["action", "params"]
    produces: "output"

  # Condition step ‚Äî –≤–µ—Ç–≤–ª–µ–Ω–∏–µ
  condition:
    executor: "interpreter"  # –ù–µ –∞–≥–µ–Ω—Ç, –∞ —Å–∞–º Orchestrator
    requires: ["condition", "then"]
    optional: ["else"]

  # Subprocess step ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
  subprocess:
    executor: "orchestrator"  # –†–µ–∫—É—Ä—Å–∏—è
    requires: ["subprocess"]

  # Subprocess loop ‚Äî —Ü–∏–∫–ª –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  subprocess_loop:
    executor: "orchestrator"
    requires: ["loop", "subprocess"]

  # Wait step ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ
  wait:
    executor: "scheduler"
    requires: ["wait_for"]  # "duration", "event", "human_input"

  # Complete step ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
  complete:
    executor: "interpreter"
    optional: ["output"]
```

---

## 10. 9 —ç—Ç–∞–ø–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### 10.1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è (–∏–∑ ORCHESTRATOR_CONCEPT_v0.2)

–ë–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç 9 —ç—Ç–∞–ø–æ–≤ –æ—Ç –∏–¥–µ–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

### 10.2. –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —ç—Ç–∞–ø–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           9 –≠–¢–ê–ü–û–í –û–†–ö–ï–°–¢–†–ò–†–û–í–ê–ù–ò–Ø –ü–†–û–ï–ö–¢–ê                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–¶–ò–Ø                                    ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞                       ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ Project Card                              ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞: –ø—Ä–æ–µ–∫—Ç/–∑–∞–¥–∞—á–∞/–≤–æ–ø—Ä–æ—Å             ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 2: –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–†–ê–í–ò–õ –†–ê–ë–û–¢–´                    ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –†–µ–∂–∏–º –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏: A/B/C                          ‚ïë  ‚îÇ
‚îÇ  ‚ïë    A = –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–∏—è                               ‚ïë  ‚îÇ
‚îÇ  ‚ïë    B = –∞–≤—Ç–æ–Ω–æ–º–∏—è —Å —É—á—ë—Ç–æ–º –ø–æ–∂–µ–ª–∞–Ω–∏–π                   ‚ïë  ‚îÇ
‚îÇ  ‚ïë    C = –ø–æ–ª–Ω—ã–π –¥–∏–∞–ª–æ–≥, —á–µ–ª–æ–≤–µ–∫ –≤ –∫—É—Ä—Å–µ                 ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ (quality gates)                  ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –≠—Å–∫–∞–ª–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞                              ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 3: –£–ö–†–£–ü–ù–Å–ù–ù–ê–Ø –ö–û–ù–¶–ï–ü–¶–ò–Ø                        ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ, —Ü–µ–Ω–Ω–æ—Å—Ç—å, —ç—Ñ—Ñ–µ–∫—Ç                       ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (KPI)                              ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–≤—Ä–µ–º—è, –±—é–¥–∂–µ—Ç, —Å—Ç–∏–ª—å)                 ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è                                  ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 4: –ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –°–ë–û–† –î–ê–ù–ù–´–•                      ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏                    ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤/–∞–Ω–∞–ª–æ–≥–æ–≤                        ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ò–∑—É—á–µ–Ω–∏–µ best practices                            ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ü—Ä–∏–Ω—Ü–∏–ø: "–ù–µ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥"                 ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 5: –ü–û–õ–ù–ê–Ø –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø              ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –î–µ—Ç–∞–ª—å–Ω–æ–µ –¢–ó (—É–±—Ä–∞—Ç—å –≤—Å–µ "–±–µ–ª—ã–µ –ø—è—Ç–Ω–∞")            ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞                               ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤                           ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 6: –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò                              ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ WBS (Work Breakdown Structure)                     ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏                          ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π                           ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∞–≥–µ–Ω—Ç–∞–º                           ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 7: –ü–û–î–ë–û–† –ö–û–ú–ê–ù–î–´                               ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ Capability matching                                ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–æ–≤                       ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏                             ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 8: –ò–°–ü–û–õ–ù–ï–ù–ò–ï –° –¶–ò–ö–õ–û–ú –ö–ê–ß–ï–°–¢–í–ê                 ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤                                   ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ Quality Loop: –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –∫—Ä–∏—Ç–∏–∫–∞ ‚Üí —É–ª—É—á—à–µ–Ω–∏–µ       ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, retry                            ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤                              ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ                          ‚ñº                                  ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó  ‚îÇ
‚îÇ  ‚ïë  –≠–¢–ê–ü 9: –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ò –£–õ–£–ß–®–ï–ù–ò–ï                      ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ Post-mortem –∞–Ω–∞–ª–∏–∑                                 ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞: —á—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, —á—Ç–æ –Ω–µ—Ç              ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤                       ‚ïë  ‚îÇ
‚îÇ  ‚ïë  ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ learned lessons                         ‚ïë  ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 10.3. –†–µ–∂–∏–º—ã –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏ (–∏–∑ –≠—Ç–∞–ø–∞ 2)

```yaml
autonomy_modes:
  A:  # –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–∏—è
    description: "Orchestrator –¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ"
    human_involvement: "minimal"
    checkpoints: ["final_result_only"]
    escalation: "only_on_critical_error"

  B:  # –ê–≤—Ç–æ–Ω–æ–º–∏—è —Å —É—á—ë—Ç–æ–º –ø–æ–∂–µ–ª–∞–Ω–∏–π
    description: "Orchestrator —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–∞"
    human_involvement: "preferences"
    checkpoints: ["major_decisions", "final_result"]
    escalation: "on_significant_decisions"

  C:  # –ü–æ–ª–Ω—ã–π –¥–∏–∞–ª–æ–≥
    description: "–ß–µ–ª–æ–≤–µ–∫ –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤"
    human_involvement: "full"
    checkpoints: ["every_phase", "every_major_step"]
    escalation: "on_any_uncertainty"
```

---

## 11. –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

### 11.1. –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏

```yaml
# –ò–∑ QUESTIONS.md 1.7
nesting_protection:
  # –ñ—ë—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã
  max_subprocess_depth: 10
  max_total_steps: 1000
  max_total_processes: 100

  # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–≤
  cycle_detection:
    enabled: true
    method: "visited_set"  # –∏–ª–∏ "tarjan_scc"

  # –ë—é–¥–∂–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—è–º
  budget_inheritance:
    method: "proportional"  # –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ–ª—é –±—é–¥–∂–µ—Ç–∞
    reserve_for_parent: 0.1  # 10% –æ—Å—Ç–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—é
```

### 11.2. Circuit Breaker –¥–ª—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

```yaml
# –ò–∑ QUESTIONS.md 1.9
circuit_breaker:
  failure_threshold: 3        # –ü–æ—Å–ª–µ 3 –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥
  recovery_timeout_seconds: 60
  max_recovery_timeout: 3600  # –ú–∞–∫—Å–∏–º—É–º 1 —á–∞—Å
  backoff_multiplier: 2.0

  states:
    closed: "–ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
    open: "–ê–≥–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á—ë–Ω"
    half_open: "–ü—Ä–æ–±—É–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
```

### 11.3. Rate Limiting

```yaml
rate_limiting:
  # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã
  global:
    max_commands_per_second: 100
    max_processes_per_minute: 10

  # –õ–∏–º–∏—Ç—ã –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å
  per_process:
    max_steps_per_minute: 60
    max_subprocess_spawns_per_minute: 10
```

### 11.4. Kill Switch

```yaml
kill_switch:
  # –ß–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
  enabled: true

  # –¢–∏–ø—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
  stop_types:
    graceful:
      description: "–î–æ–∂–¥–∞—Ç—å—Å—è —Ç–µ–∫—É—â–∏—Ö —à–∞–≥–æ–≤, –ø–æ—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
      timeout_seconds: 300

    immediate:
      description: "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ"
      cancel_in_flight: true

    emergency:
      description: "–ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã"
      shutdown_all_components: true
```

---

## 12. Backwards Compatibility —Å v1.0

> **–ö—Ä–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤**: "–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –Ω–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞. –ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å? –ß—Ç–æ –ª–æ–º–∞–µ—Ç—Å—è?"

### 12.1. –ü—Ä–∏–Ω—Ü–∏–ø: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**Orchestrator v2.0 MUST –±—ã—Ç—å 100% –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å v1.0**:

- ‚úÖ –ß–∏—Ç–∞—Ç—å –∏ –∏—Å–ø–æ–ª–Ω—è—Ç—å —Å—Ç–∞—Ä—ã–µ Process Cards –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π MESSAGE_FORMAT_v1.0
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å Node Registry –∏ Node Passport v1.0
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å MindBus Protocol v1.0
- ‚úÖ **–ù–æ–≤—ã–µ —Ñ–∏—á–∏ ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã** (v1.0 –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)

### 12.2. –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

```yaml
compatibility_matrix:
  # Process Cards
  process_cards:
    v1.0_format:
      supported: true
      deprecation_date: null      # –ù–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º —É–±–∏—Ä–∞—Ç—å
      migration_path: "optional"

    v2.0_format:
      backwards_compatible: true  # v2.0 –∫–∞—Ä—Ç–æ—á–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è v1.0 Orchestrator? –ù–ï–¢
      forward_compatible: true    # v1.0 –∫–∞—Ä—Ç–æ—á–∫–∏ —á–∏—Ç–∞—é—Ç—Å—è v2.0 Orchestrator? –î–ê

  # –°–æ–æ–±—â–µ–Ω–∏—è MindBus
  messages:
    v1.0_types:
      - "ai.team.cmd.*"           # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
      - "ai.team.result.*"        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
      - "ai.team.event.*"         # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

    v2.0_additions:
      - "ai.team.event.meeting.*"     # –ù–æ–≤—ã–µ, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è v1.0
      - "ai.team.event.subprocess.*"  # –ù–æ–≤—ã–µ, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è v1.0
      - "ai.team.event.quality.*"     # –ù–æ–≤—ã–µ, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è v1.0

  # State Store
  state_store:
    v1.0_schema:
      supported: true
      auto_migration: true        # –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ v2.0

    v2.0_schema:
      new_fields:
        - "root_process_id"       # –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è, default = process_id
        - "root_context"          # –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è, default = {}
        - "pending_commands"      # –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è, default = []
```

### 12.3. –ü—Ä–∞–≤–∏–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

```yaml
migration_rules:
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
  automatic:
    # State Store
    state_store:
      trigger: "first_v2.0_startup"
      actions:
        - "ADD COLUMN root_process_id DEFAULT process_id"
        - "ADD COLUMN root_context DEFAULT '{}'"
        - "ADD COLUMN pending_commands DEFAULT '[]'"
        - "ADD COLUMN version DEFAULT 1"
      rollback_safe: true

    # Process Cards
    process_cards:
      trigger: "on_load"
      actions:
        - "IF no 'spec_version' THEN set spec_version = '1.0'"
        - "IF no 'subprocess' fields THEN treat as flat process"
      no_modification_to_file: true  # –¢–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏

  # –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)
  manual:
    process_cards:
      description: "–û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∏—á"
      when: "want_to_use_subprocesses OR want_collaborative_planning"
      guide: "docs/migration/process_cards_v1_to_v2.md"
```

### 12.4. –ß—Ç–æ –ù–ï –ª–æ–º–∞–µ—Ç—Å—è (–≥–∞—Ä–∞–Ω—Ç–∏–∏)

```yaml
backwards_compatibility_guarantees:
  # Process Card Interpreter
  interpreter:
    - "v1.0 –∫–∞—Ä—Ç–æ—á–∫–∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ v1.0 Orchestrator"
    - "–ü–æ—Ä—è–¥–æ–∫ —à–∞–≥–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è"
    - "–ü–æ–≤–µ–¥–µ–Ω–∏–µ depends_on –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è"
    - "–ü–æ–≤–µ–¥–µ–Ω–∏–µ conditions –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è"

  # –°–æ–æ–±—â–µ–Ω–∏—è
  messages:
    - "v1.0 COMMAND —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è"
    - "v1.0 RESULT —Ñ–æ—Ä–º–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (–µ—Å–ª–∏ –∞–≥–µ–Ω—Ç v1.0)"
    - "v1.0 EVENT —Ñ–æ—Ä–º–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è"
    - "–ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã"

  # State
  state:
    - "v1.0 –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ upgrade"
    - "Recovery —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è v1.0 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"

  # API
  api:
    - "v1.0 API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç"
    - "–ù–æ–≤—ã–µ endpoints –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è, —Å—Ç–∞—Ä—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è"
```

### 12.5. –ß—Ç–æ –ú–û–ñ–ï–¢ —Å–ª–æ–º–∞—Ç—å—Å—è (–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–∏—Å–∫–∏)

```yaml
breaking_changes_risks:
  # –†–∏—Å–∫ 1: –ù–æ–≤—ã–µ event types
  risk_1:
    description: "–ê–≥–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ event types"
    affected: "–ê–≥–µ–Ω—Ç—ã —Å strict message parsing"
    mitigation: "–ê–≥–µ–Ω—Ç—ã SHOULD –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã"
    severity: "low"

  # –†–∏—Å–∫ 2: –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ State Store
  risk_2:
    description: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —á–∏—Ç–∞—é—â–∏–µ State Store –Ω–∞–ø—Ä—è–º—É—é"
    affected: "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –¥–∞—à–±–æ—Ä–¥—ã"
    mitigation: "–û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É, –Ω–æ–≤—ã–µ –ø–æ–ª—è nullable"
    severity: "medium"

  # –†–∏—Å–∫ 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  risk_3:
    description: "v2.0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ State Store"
    affected: "–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã"
    mitigation: "–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ"
    severity: "low"
```

### 12.6. Feature Detection

```yaml
feature_detection:
  # Orchestrator –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Å–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏
  orchestrator:
    detect_card_version:
      method: "check spec_version field"
      fallback: "1.0"

    detect_agent_version:
      method: "check Node Passport capabilities"
      v2_indicators:
        - "supports_meetings"
        - "supports_subprocesses"

  # –ê–≥–µ–Ω—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Å–∏—é Orchestrator
  agent:
    detect_orchestrator_version:
      method: "check message format"
      v2_indicators:
        - "root_process_id in COMMAND"
        - "root_context in COMMAND"
```

### 12.7. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫

```yaml
# Process Card v1.0 (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç)
# –ù–ï–¢ spec_version –ø–æ–ª—è
metadata:
  id: "old-card-001"
  name: "–°—Ç–∞—Ä–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞"

spec:
  steps:
    - id: step-1
      action: do_something

---
# Process Card v2.0 (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
metadata:
  id: "new-card-001"
  name: "–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞"
  spec_version: "2.0"           # ‚Üê –Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è

spec:
  # –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.0
  subprocess_config:
    max_depth: 5
    budget_inheritance: "proportional"

  steps:
    - id: step-1
      type: subprocess           # ‚Üê –ù–æ–≤—ã–π —Ç–∏–ø —à–∞–≥–∞
      subprocess:
        steps:
          - id: substep-1
            action: do_something
```

### 12.8. Deprecation Policy

```yaml
deprecation_policy:
  # –ú—ã –ù–ï –ø–ª–∞–Ω–∏—Ä—É–µ–º deprecate v1.0 —Ñ–æ—Ä–º–∞—Ç
  v1_format:
    status: "supported"
    deprecation_planned: false
    reason: "–ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç v2.0 —Ñ–∏—á"

  # –ï—Å–ª–∏ –∫–æ–≥–¥–∞-–ª–∏–±–æ –±—É–¥–µ–º deprecate
  future_deprecation_process:
    notice_period_months: 12
    steps:
      - "Announce in release notes"
      - "Add deprecation warnings in logs"
      - "Provide migration tool"
      - "Support both versions during transition"
      - "Remove old version only in major release"
```

---

## 13. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MindBus –∏ Storage

### 13.1. –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è MindBus

```yaml
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –¥–ª—è v2.0
new_event_types:
  # –°–æ–≤–µ—â–∞–Ω–∏—è
  - type: "ai.team.event.meeting.started"
    routing_key: "evt.meeting.started"

  - type: "ai.team.event.meeting.proposal"
    routing_key: "evt.meeting.proposal"

  - type: "ai.team.event.meeting.concluded"
    routing_key: "evt.meeting.concluded"

  # –ò–µ—Ä–∞—Ä—Ö–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - type: "ai.team.event.subprocess.spawned"
    routing_key: "evt.process.subprocess_spawned"

  - type: "ai.team.event.subprocess.completed"
    routing_key: "evt.process.subprocess_completed"

  # Quality Loop
  - type: "ai.team.event.quality.evaluated"
    routing_key: "evt.quality.evaluated"

  - type: "ai.team.event.quality.improvement_requested"
    routing_key: "evt.quality.improvement_requested"
```

### 12.3. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Storage

```yaml
# –ù–æ–≤—ã–µ —Ç–∏–ø—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –¥–ª—è v2.0
new_artifact_types:
  - "process_card_generated"    # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  - "meeting_transcript"        # –ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–æ–≤–µ—â–∞–Ω–∏–π
  - "quality_report"            # –û—Ç—á—ë—Ç—ã –æ –∫–∞—á–µ—Å—Ç–≤–µ
  - "post_mortem"               # –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã
```

---

## 13. –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

### 13.1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã (—Ç—Ä–µ–±—É—é—Ç —Ä–µ—à–µ–Ω–∏—è)

| # | –í–æ–ø—Ä–æ—Å | –í–∞—Ä–∏–∞–Ω—Ç—ã | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---|--------|----------|--------------|
| 1 | –ö–∞–∫ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –∞–≥–µ–Ω—Ç–æ–≤? | LLM synthesis / Voting / Human approval | LLM synthesis |
| 2 | –ö—Ç–æ —Ä–µ—à–∞–µ—Ç "—Ö–≤–∞—Ç–∏—Ç –¥—Ä–æ–±–∏—Ç—å"? | –ö–æ–º–∞–Ω–¥–∞ / Orchestrator / Policy | –ö–æ–º–∞–Ω–¥–∞ + Policy |
| 3 | –ö–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –±—é–¥–∂–µ—Ç –º–µ–∂–¥—É –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏? | Proportional / Fixed / Dynamic | Proportional |
| 4 | –ù—É–∂–Ω–æ –ª–∏ —á–µ–ª–æ–≤–µ–∫—É –æ–¥–æ–±—Ä—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏? | Always / Never / Critical only | Critical only |
| 5 | –ö–∞–∫ –∞–≥–µ–Ω—Ç—ã "–ø–æ–º–Ω—è—Ç" –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–≤–µ—â–∞–Ω–∏–π? | Memory / Message / Orchestrator stores | Orchestrator stores |

### 13.2. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø–æ–∑–∂–µ

| # | –í–æ–ø—Ä–æ—Å | –ö–æ–≥–¥–∞ –æ–±—Å—É–∂–¥–∞—Ç—å |
|---|--------|-----------------|
| 6 | Multi-Orchestrator –¥–ª—è HA | –ü–æ—Å–ª–µ MVP |
| 7 | A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ | –ü–æ—Å–ª–µ MVP |
| 8 | –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∫–∞—Ä—Ç–æ—á–µ–∫ | v2.0+ |
| 9 | –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ | v2.0+ |

---

## 14. –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 14.1. –§–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```
–§–∞–∑–∞ 1: –û–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –¢–ó (—Ç–µ–∫—É—â–∞—è)
‚îú‚îÄ‚îÄ –†–µ–≤—å—é —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ –û–±—Å—É–∂–¥–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π
‚îî‚îÄ‚îÄ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

–§–∞–∑–∞ 2: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (MVP)
‚îú‚îÄ‚îÄ –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä Process Cards (—É–∂–µ –µ—Å—Ç—å –≤ v1.0)
‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É subprocess
‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–π Quality Loop
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç—ã

–§–∞–∑–∞ 3: –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ Meeting Protocol
‚îú‚îÄ‚îÄ Proposal —Å–±–æ—Ä –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ LLM Synthesis
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç—ã

–§–∞–∑–∞ 4: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
‚îú‚îÄ‚îÄ LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
‚îú‚îÄ‚îÄ –®–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç—ã

–§–∞–∑–∞ 5: –ü–æ–ª–Ω—ã–π –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Å—Ç–µ–∫
‚îú‚îÄ‚îÄ 9 —ç—Ç–∞–ø–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ –†–µ–∂–∏–º—ã –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Self-reflection
‚îî‚îÄ‚îÄ Post-mortem
```

### 14.2. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP v2.0

```yaml
mvp_criteria:
  must_have:
    - "–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç"
    - "Quality Loop —Å Critic –∞–≥–µ–Ω—Ç–æ–º"
    - "–ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏"
    - "Circuit Breaker"

  should_have:
    - "–ë–∞–∑–æ–≤–æ–µ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
    - "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫"

  nice_to_have:
    - "9 —ç—Ç–∞–ø–æ–≤ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è"
    - "Self-reflection"
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**ORCHESTRATOR_SPEC v2.0 DRAFT** ‚Äî —ç—Ç–æ —ç–≤–æ–ª—é—Ü–∏—è –æ—Ç "—É–º–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è" –∫ "—É–º–Ω–æ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—É":

| –ê—Å–ø–µ–∫—Ç | v1.0 | v2.0 |
|--------|------|------|
| –†–æ–ª—å | –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∫–∞—Ä—Ç–æ—á–µ–∫ | **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã** |
| –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | –û–¥–∏–Ω–æ–∫–∏–π LLM | **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ** |
| Process Cards | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ | **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ** |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –ü–ª–æ—Å–∫–∞—è | **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è** |
| –ö–∞—á–µ—Å—Ç–≤–æ | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è | **Quality Loop** |
| –û–±—É—á–µ–Ω–∏–µ | –ù–µ—Ç | **Post-mortem, Self-reflection** |

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –û–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

---

**–í–µ—Ä—Å–∏—è**: 2.0-draft
**–î–∞—Ç–∞**: 2025-12-19
**–ê–≤—Ç–æ—Ä—ã**: User + Claude Opus 4.5
**–°—Ç–∞—Ç—É—Å**: **–ß–ï–†–ù–û–í–ò–ö** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏
