# Когнитивный стек Оркестратора — Рецензия и дополнения (v0.1)

**Дата**: 2025-12-17
**Автор**: Коллеги (обсуждение)
**Статус**: ЧЕРНОВИК

---

> **ВНИМАНИЕ: ЧЕРНОВИК**
>
> Этот документ является черновиком и требует:
> 1. Детальной проработки каждого пункта
> 2. Проверки на соответствие SSOT документации проекта
> 3. Утверждения перед интеграцией в основную документацию
>
> **НЕ ЯВЛЯЕТСЯ** частью SSOT. Идеи могут противоречить текущей архитектуре.
>
> **Требуется сверка с**:
> - [ORCHESTRATOR_SPEC_v1.0.md](../../SSOT/ORCHESTRATOR_SPEC_v1.0.md)
> - [PROCESS_CARD_SPEC_v1.0.md](../../SSOT/PROCESS_CARD_SPEC_v1.0.md)
> - [NODE_PASSPORT_SPEC_v1.0.md](../../SSOT/NODE_PASSPORT_SPEC_v1.0.md)
> - [MESSAGE_FORMAT_v1.1.md](../../SSOT/MESSAGE_FORMAT_v1.1.md)

---

## Контекст

Этот черновик v0.1 — фундаментальный шаг. Фактически описан «когнитивный стек» управления сложными проектами, где ИИ переходит от роли чат-бота к роли операционной системы или CEO.

Документ структурно очень цельный. Особенно ценно, что заложен цикл обратной связи (Step 10) и матрица ответственности (Step 1.2), так как без этого автономные системы либо «галлюцинируют» в бесконечном цикле, либо требуют ручного управления на каждом шагу.

---

## 1. Архитектурная визуализация

Чтобы логика оркестратора была понятна всем узлам системы, ее можно представить как **цикл управления с обратной связью** (Closed-loop control).

---

## 2. Критические дополнения к черновику

### А. Концепция "State-Machine" для задач

В пункте 7 (Исполнение) важно зафиксировать, что каждая задача в AI_TEAM должна иметь **Статус**:

- `PENDING` (в очереди)
- `RESEARCHING` (аналитика)
- `EXECUTING` (выполнение)
- `CRITIQUE` (проверка качества)
- `REFACTORING` (исправление по фидбеку)
- `FINALIZED` (внесено в SSOT)

Это позволит Оркестратору в любой момент времени выдать "Dashboard" проекта.

### Б. Механизм "Internal Economy" (Токены/Ресурсы)

В пункте 8 (Лимит итераций) стоит добавить понятие **Resource Budget**. Оркестратор должен знать: "У меня есть 10 итераций и $5 бюджета на этот блок". Если качество 96%, а бюджет исчерпан — это жесткий триггер для эскалации на человека.

### В. SSOT как "Живой организм"

В пункте 4 (Документация) важно подчеркнуть: документация — это не PDF-файл. Это **машиночитаемый граф** (JSON/YAML).

- Если агент-кодер изменил API, он обязан обновить SSOT-спеку.
- Оркестратор видит изменение в SSOT и автоматически кидает задачу агенту-тестировщику обновить тесты.

---

## 3. Предложение по формализации "AI-Комиссии" (Пункт 8)

Чтобы избежать "предвзятости" одной модели, в Process Card для контроля качества стоит прописать паттерн **"Triangle of Quality"**:

1. **Исполнитель** (напр. GPT-4o) — создает контент.
2. **Критик** (напр. Claude 3.5 Sonnet) — ищет слабые места.
3. **Арбитр** (напр. o1-preview или Человек) — принимает решение о переделке или пропуске.

---

## 4. Следующие шаги для v0.2

Чтобы черновик стал рабочим инструментом, предлагается:

1. **Определить формат Process Card**: Как именно будет выглядеть YAML-файл, который оркестратор прочитает для запуска проекта "Книга"?
2. **Создать шаблон Node Passport**: Какие поля (capabilities) обязательны, чтобы оркестратор понял: "Этот агент умеет монтировать видео в 4K"?
3. **Прописать "Протокол Эскалации"**: Список условий, при которых ИИ обязан разбудить человека (превышение бюджета, логический тупик, нарушение этических фильтров).

---

## Связанные документы

- [ORCHESTRATOR_SPEC_v1.0.md](../../SSOT/ORCHESTRATOR_SPEC_v1.0.md)
- [PROCESS_CARD_SPEC_v1.0.md](../../SSOT/PROCESS_CARD_SPEC_v1.0.md)
- [NODE_PASSPORT_SPEC_v1.0.md](../../SSOT/NODE_PASSPORT_SPEC_v1.0.md)
